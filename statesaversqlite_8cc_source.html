<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Votca: ctp/src/libctp/statesaversqlite.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>ctp/src/libctp/statesaversqlite.cc</h1><a href="statesaversqlite_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> *            Copyright 2009-2012 The VOTCA Development Team</span>
<a name="l00003"></a>00003 <span class="comment"> *                       (http://www.votca.org)</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> *      Licensed under the Apache License, Version 2.0 (the "License")</span>
<a name="l00006"></a>00006 <span class="comment"> *</span>
<a name="l00007"></a>00007 <span class="comment"> * You may not use this file except in compliance with the License.</span>
<a name="l00008"></a>00008 <span class="comment"> * You may obtain a copy of the License at</span>
<a name="l00009"></a>00009 <span class="comment"> *</span>
<a name="l00010"></a>00010 <span class="comment"> *              http://www.apache.org/licenses/LICENSE-2.0</span>
<a name="l00011"></a>00011 <span class="comment"> *</span>
<a name="l00012"></a>00012 <span class="comment"> * Unless required by applicable law or agreed to in writing, software</span>
<a name="l00013"></a>00013 <span class="comment"> * distributed under the License is distributed on an "AS IS" BASIS,</span>
<a name="l00014"></a>00014 <span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<a name="l00015"></a>00015 <span class="comment"> * See the License for the specific language governing permissions and</span>
<a name="l00016"></a>00016 <span class="comment"> * limitations under the License.</span>
<a name="l00017"></a>00017 <span class="comment"> *</span>
<a name="l00018"></a>00018 <span class="comment"> */</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 
<a name="l00021"></a>00021 <span class="preprocessor">#include &lt;<a class="code" href="statesaversqlite_8h.html">votca/ctp/statesaversqlite.h</a>&gt;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;<a class="code" href="statement_8h.html">votca/tools/statement.h</a>&gt;</span>
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="keyword">namespace </span>votca { <span class="keyword">namespace </span>ctp {
<a name="l00025"></a>00025 
<a name="l00026"></a><a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#4b614a08672b46a2734fdd38e6dd0a97">00026</a> <span class="keywordtype">void</span> <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#4b614a08672b46a2734fdd38e6dd0a97">StateSaverSQLite::Open</a>(<a class="code" href="classvotca_1_1ctp_1_1Topology.html" title="Container for molecules, conjugated segments, rigid fragments, and atoms.">Topology</a>&amp; qmtop, <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;file) {
<a name="l00027"></a>00027 
<a name="l00028"></a>00028     <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#3f4f12eb20069e65bf66bf22733cc63e">_sqlfile</a> = file;
<a name="l00029"></a>00029     <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b1e5eefa1aeefd87a2fa6eeeb337dad6">_db</a>.<a class="code" href="classvotca_1_1tools_1_1Database.html#8ea2aed75f62e2019af35b4934adf028" title="Helper function for opening / creating / upgrading a sqlite3 database.">OpenHelper</a>(file.c_str());
<a name="l00030"></a>00030     
<a name="l00031"></a>00031     <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a> = &amp;qmtop;
<a name="l00032"></a>00032     <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#4073b7b3e098ab893f8fb0efe342586e">_frames</a>.clear();
<a name="l00033"></a>00033     <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#8f2e4c8435645ec11b0b2d9bcd99b2fc">_topIds</a>.clear();
<a name="l00034"></a>00034 
<a name="l00035"></a>00035     <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#21d9221ac27d7d1ec99a57a0ffb73733">_frame</a> = 0;
<a name="l00036"></a>00036     <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#ef070ecc34d6564591a9db802c1d69bf">_current_frame</a> = -1;
<a name="l00037"></a>00037     <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#a696795ba867e472d1b11253eae8aceb">_was_read</a> = <span class="keyword">false</span>;
<a name="l00038"></a>00038 
<a name="l00039"></a>00039     <span class="comment">// Query available frames in database</span>
<a name="l00040"></a>00040     <a class="code" href="classvotca_1_1tools_1_1Statement.html" title="Wrapper for sqlite prepared statements.">Statement</a> *stmt = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b1e5eefa1aeefd87a2fa6eeeb337dad6">_db</a>.<a class="code" href="classvotca_1_1tools_1_1Database.html#fb2a4e03b21b167516b2313d73c96581">Prepare</a>(<span class="stringliteral">"SELECT _id, id FROM frames;"</span>);
<a name="l00041"></a>00041     <span class="keywordflow">while</span>(stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#676ec07b2df9828eb8cd97b06cd99122" title="perform a step">Step</a>() != SQLITE_DONE) {
<a name="l00042"></a>00042         <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#4073b7b3e098ab893f8fb0efe342586e">_frames</a>.push_back(stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">int</span>&gt;(0));
<a name="l00043"></a>00043         <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#8f2e4c8435645ec11b0b2d9bcd99b2fc">_topIds</a>.push_back(stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">int</span>&gt;(1));
<a name="l00044"></a>00044     }
<a name="l00045"></a>00045     <span class="keyword">delete</span> stmt;
<a name="l00046"></a>00046     
<a name="l00047"></a>00047 }
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 
<a name="l00051"></a><a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#214d4cd25b73d995d403840098e62a5a">00051</a> <span class="keywordtype">void</span> <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#214d4cd25b73d995d403840098e62a5a">StateSaverSQLite::WriteFrame</a>() {
<a name="l00052"></a>00052 
<a name="l00053"></a>00053     <span class="keywordtype">bool</span> hasAlready = this-&gt;<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#9134a2896226a9176966cf3ff1a21cb6">HasTopology</a>(<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>);
<a name="l00054"></a>00054 
<a name="l00055"></a>00055     <span class="keywordflow">if</span> ( ! hasAlready ) {
<a name="l00056"></a>00056         <span class="keywordflow">if</span> (<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#a9d490b41236b1c5a43e101e40257c29">getDatabaseId</a>() &gt;= 0 ) {
<a name="l00057"></a>00057             <span class="keywordflow">throw</span> runtime_error (<span class="stringliteral">"How was this topology generated? "</span>);
<a name="l00058"></a>00058         }
<a name="l00059"></a>00059         <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#07716c519d6052620a1bd645c022281f">setDatabaseId</a>(<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#4073b7b3e098ab893f8fb0efe342586e">_frames</a>.size());
<a name="l00060"></a>00060         <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#8f2e4c8435645ec11b0b2d9bcd99b2fc">_topIds</a>.push_back(<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#a9d490b41236b1c5a43e101e40257c29">getDatabaseId</a>());
<a name="l00061"></a>00061         cout &lt;&lt; <span class="stringliteral">"Saving "</span>;
<a name="l00062"></a>00062     }
<a name="l00063"></a>00063     <span class="keywordflow">else</span> {
<a name="l00064"></a>00064         cout &lt;&lt; <span class="stringliteral">"Updating "</span>;
<a name="l00065"></a>00065     }
<a name="l00066"></a>00066 
<a name="l00067"></a>00067     cout &lt;&lt; <span class="stringliteral">"MD+QM topology ID "</span> &lt;&lt; <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#a9d490b41236b1c5a43e101e40257c29">getDatabaseId</a>()
<a name="l00068"></a>00068          &lt;&lt; <span class="stringliteral">" (step = "</span> &lt;&lt; <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#43068a33d7554c721b3e62de73c6fff7">getStep</a>()
<a name="l00069"></a>00069          &lt;&lt; <span class="stringliteral">", time = "</span> &lt;&lt; <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#8f003ffcee7b920a5a37634562e6b0cc">getTime</a>()
<a name="l00070"></a>00070          &lt;&lt; <span class="stringliteral">") to "</span> &lt;&lt; <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#3f4f12eb20069e65bf66bf22733cc63e">_sqlfile</a> &lt;&lt; endl;
<a name="l00071"></a>00071     cout &lt;&lt; <span class="stringliteral">"... "</span>;
<a name="l00072"></a>00072 
<a name="l00073"></a>00073     <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b1e5eefa1aeefd87a2fa6eeeb337dad6">_db</a>.<a class="code" href="classvotca_1_1tools_1_1Database.html#447228bd9a8c1c327e268616d324a486">BeginTransaction</a>();    
<a name="l00074"></a>00074 
<a name="l00075"></a>00075     this-&gt;<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#69138b9d4ee41130825460b4ab925b04">WriteMeta</a>(hasAlready);
<a name="l00076"></a>00076     this-&gt;<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#6e7391f34c7f6be90838d2632d047671">WriteMolecules</a>(hasAlready);
<a name="l00077"></a>00077     this-&gt;<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#341cefa79878150fa74ff1c439a59a55">WriteSegTypes</a>(hasAlready);
<a name="l00078"></a>00078     this-&gt;<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b7c95b179675f18bdd4e1c9cb33b4726">WriteSegments</a>(hasAlready);
<a name="l00079"></a>00079     this-&gt;<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#aa80940a543b0b2e1914a00c72489f43">WriteFragments</a>(hasAlready);
<a name="l00080"></a>00080     this-&gt;<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#d6a481e1c748bba7d4940c28891bdfcd">WriteAtoms</a>(hasAlready);
<a name="l00081"></a>00081     this-&gt;<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#abb4843ef512fdd31276ca18ddb2a94d">WritePairs</a>(hasAlready);
<a name="l00082"></a>00082 
<a name="l00083"></a>00083     <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b1e5eefa1aeefd87a2fa6eeeb337dad6">_db</a>.<a class="code" href="classvotca_1_1tools_1_1Database.html#0f648d5bc442513a0bd38c518d01bdee">EndTransaction</a>();
<a name="l00084"></a>00084 
<a name="l00085"></a>00085     cout &lt;&lt; <span class="stringliteral">". "</span> &lt;&lt; endl;
<a name="l00086"></a>00086 }
<a name="l00087"></a>00087 
<a name="l00088"></a>00088 
<a name="l00089"></a><a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#69138b9d4ee41130825460b4ab925b04">00089</a> <span class="keywordtype">void</span> <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#69138b9d4ee41130825460b4ab925b04">StateSaverSQLite::WriteMeta</a>(<span class="keywordtype">bool</span> update) {
<a name="l00090"></a>00090     
<a name="l00091"></a>00091     <a class="code" href="classvotca_1_1tools_1_1Statement.html" title="Wrapper for sqlite prepared statements.">Statement</a> *stmt;
<a name="l00092"></a>00092     <span class="keywordflow">if</span> ( update ) {
<a name="l00093"></a>00093         <span class="keywordflow">return</span>; <span class="comment">// Nothing to do here</span>
<a name="l00094"></a>00094     }
<a name="l00095"></a>00095     <span class="keywordflow">else</span> {
<a name="l00096"></a>00096         stmt = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b1e5eefa1aeefd87a2fa6eeeb337dad6">_db</a>.<a class="code" href="classvotca_1_1tools_1_1Database.html#fb2a4e03b21b167516b2313d73c96581">Prepare</a>( <span class="stringliteral">"INSERT INTO frames ("</span>
<a name="l00097"></a>00097                             <span class="stringliteral">"id,    time,  step,  "</span>
<a name="l00098"></a>00098                             <span class="stringliteral">"box11, box12, box13, "</span>
<a name="l00099"></a>00099                             <span class="stringliteral">"box21, box22, box23, "</span>
<a name="l00100"></a>00100                             <span class="stringliteral">"box31, box32, box33, "</span>
<a name="l00101"></a>00101                             <span class="stringliteral">"canRigid )"</span>
<a name="l00102"></a>00102                             <span class="stringliteral">"VALUES ("</span>
<a name="l00103"></a>00103                             <span class="stringliteral">"?,     ?,     ?,"</span>
<a name="l00104"></a>00104                             <span class="stringliteral">"?,     ?,     ?,"</span>
<a name="l00105"></a>00105                             <span class="stringliteral">"?,     ?,     ?,"</span>
<a name="l00106"></a>00106                             <span class="stringliteral">"?,     ?,     ?,"</span>
<a name="l00107"></a>00107                             <span class="stringliteral">"?)"</span>);
<a name="l00108"></a>00108     }
<a name="l00109"></a>00109 
<a name="l00110"></a>00110     stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(1, <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#a9d490b41236b1c5a43e101e40257c29">getDatabaseId</a>());
<a name="l00111"></a>00111     stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(2, <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#8f003ffcee7b920a5a37634562e6b0cc">getTime</a>());
<a name="l00112"></a>00112     stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(3, <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#43068a33d7554c721b3e62de73c6fff7">getStep</a>());
<a name="l00113"></a>00113 
<a name="l00114"></a>00114     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacedensity__symmetrize.html#70312de6d597e9aea75ba426b32aa62c">i</a> = 0; <a class="code" href="namespacedensity__symmetrize.html#70312de6d597e9aea75ba426b32aa62c">i</a> &lt; 3; <a class="code" href="namespacedensity__symmetrize.html#70312de6d597e9aea75ba426b32aa62c">i</a>++) {
<a name="l00115"></a>00115         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceDIPRO__TI.html#99261ba49d59ae81748f691217dc6721">j</a> = 0; <a class="code" href="namespaceDIPRO__TI.html#99261ba49d59ae81748f691217dc6721">j</a> &lt; 3; <a class="code" href="namespaceDIPRO__TI.html#99261ba49d59ae81748f691217dc6721">j</a>++) {
<a name="l00116"></a>00116             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(4+3*<a class="code" href="namespacedensity__symmetrize.html#70312de6d597e9aea75ba426b32aa62c">i</a>+<a class="code" href="namespaceDIPRO__TI.html#99261ba49d59ae81748f691217dc6721">j</a>, <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#01a6810530c39bc957d8efca5b248c66">getBox</a>().<a class="code" href="classvotca_1_1tools_1_1matrix.html#f72274a89dd778cd1abaf61105d420a4" title="get an element of the matrix">get</a>(<a class="code" href="namespacedensity__symmetrize.html#70312de6d597e9aea75ba426b32aa62c">i</a>,<a class="code" href="namespaceDIPRO__TI.html#99261ba49d59ae81748f691217dc6721">j</a>));
<a name="l00117"></a>00117         }
<a name="l00118"></a>00118     }
<a name="l00119"></a>00119 
<a name="l00120"></a>00120     <span class="keywordtype">int</span> canRigid = 0;
<a name="l00121"></a>00121     <span class="keywordflow">if</span> (<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#0a4d78201b0aebc99390225cb30c571f">canRigidify</a>()) { canRigid = 1; }
<a name="l00122"></a>00122     stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(13, canRigid);
<a name="l00123"></a>00123 
<a name="l00124"></a>00124     stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#46790a14befa3847466a492ba059b3b2" title="perform an insert step">InsertStep</a>();
<a name="l00125"></a>00125     <span class="keyword">delete</span> stmt;
<a name="l00126"></a>00126     stmt = NULL;
<a name="l00127"></a>00127 }
<a name="l00128"></a>00128 
<a name="l00129"></a>00129 
<a name="l00130"></a><a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#6e7391f34c7f6be90838d2632d047671">00130</a> <span class="keywordtype">void</span> <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#6e7391f34c7f6be90838d2632d047671">StateSaverSQLite::WriteMolecules</a>(<span class="keywordtype">bool</span> update) {
<a name="l00131"></a>00131     cout &lt;&lt; <span class="stringliteral">"Molecules"</span> &lt;&lt; flush;
<a name="l00132"></a>00132     <a class="code" href="classvotca_1_1tools_1_1Statement.html" title="Wrapper for sqlite prepared statements.">Statement</a> *stmt;
<a name="l00133"></a>00133 
<a name="l00134"></a>00134     <span class="keywordflow">if</span> (!update) {
<a name="l00135"></a>00135         stmt = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b1e5eefa1aeefd87a2fa6eeeb337dad6">_db</a>.<a class="code" href="classvotca_1_1tools_1_1Database.html#fb2a4e03b21b167516b2313d73c96581">Prepare</a>(<span class="stringliteral">"INSERT INTO molecules ("</span>
<a name="l00136"></a>00136                             <span class="stringliteral">"frame, top, id,"</span>
<a name="l00137"></a>00137                             <span class="stringliteral">"name, type    )"</span>
<a name="l00138"></a>00138                             <span class="stringliteral">"VALUES ("</span>
<a name="l00139"></a>00139                             <span class="stringliteral">"?,     ?,      ?,"</span>
<a name="l00140"></a>00140                             <span class="stringliteral">"?,     ?)"</span>);
<a name="l00141"></a>00141     }
<a name="l00142"></a>00142     <span class="keywordflow">else</span> {
<a name="l00143"></a>00143         <span class="keywordflow">return</span>; <span class="comment">// nothing to do here</span>
<a name="l00144"></a>00144     }
<a name="l00145"></a>00145          
<a name="l00146"></a>00146 
<a name="l00147"></a>00147     stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(1, <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#a9d490b41236b1c5a43e101e40257c29">getDatabaseId</a>());
<a name="l00148"></a>00148 
<a name="l00149"></a>00149     vector &lt; Molecule* &gt; ::iterator mit;
<a name="l00150"></a>00150     <span class="keywordflow">for</span> (mit = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#d42bc7d62d50077d3cc4b177ff30af4e">Molecules</a>().begin();
<a name="l00151"></a>00151             mit &lt; <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#d42bc7d62d50077d3cc4b177ff30af4e">Molecules</a>().end();
<a name="l00152"></a>00152             mit++) {
<a name="l00153"></a>00153 
<a name="l00154"></a>00154         <a class="code" href="classvotca_1_1ctp_1_1Molecule.html">Molecule</a> *mol = *mit;
<a name="l00155"></a>00155 
<a name="l00156"></a>00156         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(2, mol-&gt;<a class="code" href="classvotca_1_1ctp_1_1Molecule.html#3aeb212e34c9c2574fab321de5414a77">getTopology</a>()-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#a9d490b41236b1c5a43e101e40257c29">getDatabaseId</a>());
<a name="l00157"></a>00157         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(3, mol-&gt;<a class="code" href="classvotca_1_1ctp_1_1Molecule.html#ebbdf0c200b8298b07c5d7c701502cc3" title="Returns ID of the molecule.">getId</a>());
<a name="l00158"></a>00158         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(4, mol-&gt;<a class="code" href="classvotca_1_1ctp_1_1Molecule.html#87dce0b25175392663fb3cfedb019ee6" title="Returns the name of the molecule.">getName</a>());
<a name="l00159"></a>00159         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(5, mol-&gt;<a class="code" href="classvotca_1_1ctp_1_1Molecule.html#87dce0b25175392663fb3cfedb019ee6" title="Returns the name of the molecule.">getName</a>());
<a name="l00160"></a>00160 
<a name="l00161"></a>00161         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#46790a14befa3847466a492ba059b3b2" title="perform an insert step">InsertStep</a>();
<a name="l00162"></a>00162         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#fd24d8e702dfc2eff7defd4e1e4d63b0" title="reset the statment to perform another insert or query">Reset</a>();
<a name="l00163"></a>00163     }
<a name="l00164"></a>00164 
<a name="l00165"></a>00165     <span class="keyword">delete</span> stmt;
<a name="l00166"></a>00166     stmt = NULL;
<a name="l00167"></a>00167 }
<a name="l00168"></a>00168 
<a name="l00169"></a>00169 
<a name="l00170"></a><a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#341cefa79878150fa74ff1c439a59a55">00170</a> <span class="keywordtype">void</span> <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#341cefa79878150fa74ff1c439a59a55">StateSaverSQLite::WriteSegTypes</a>(<span class="keywordtype">bool</span> update) {
<a name="l00171"></a>00171     cout &lt;&lt; <span class="stringliteral">", types"</span> &lt;&lt; flush;
<a name="l00172"></a>00172     <a class="code" href="classvotca_1_1tools_1_1Statement.html" title="Wrapper for sqlite prepared statements.">Statement</a> *stmt;
<a name="l00173"></a>00173 
<a name="l00174"></a>00174     <span class="keywordflow">if</span> (!update) {
<a name="l00175"></a>00175         stmt = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b1e5eefa1aeefd87a2fa6eeeb337dad6">_db</a>.<a class="code" href="classvotca_1_1tools_1_1Database.html#fb2a4e03b21b167516b2313d73c96581">Prepare</a>(<span class="stringliteral">"INSERT INTO segmentTypes ("</span>
<a name="l00176"></a>00176                            <span class="stringliteral">"frame, top, id,"</span>
<a name="l00177"></a>00177                            <span class="stringliteral">"name, basis, orbfile,"</span>
<a name="l00178"></a>00178                            <span class="stringliteral">"torbnrs, coordfile, canRigid)"</span>
<a name="l00179"></a>00179                            <span class="stringliteral">"VALUES ("</span>
<a name="l00180"></a>00180                            <span class="stringliteral">"?,  ?,  ?,"</span>
<a name="l00181"></a>00181                            <span class="stringliteral">"?,  ?,  ?,"</span>
<a name="l00182"></a>00182                            <span class="stringliteral">"?, ?,   ?)"</span>);
<a name="l00183"></a>00183     }
<a name="l00184"></a>00184     <span class="keywordflow">else</span> {
<a name="l00185"></a>00185         <span class="keywordflow">return</span>; <span class="comment">// nothing to do here</span>
<a name="l00186"></a>00186     }
<a name="l00187"></a>00187 
<a name="l00188"></a>00188     vector &lt; SegmentType* &gt; ::iterator typeit;
<a name="l00189"></a>00189     <span class="keywordflow">for</span> (typeit = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#19b92a7b5ffba9be0bab4228eca5938a">SegmentTypes</a>().begin();
<a name="l00190"></a>00190             typeit &lt; <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#19b92a7b5ffba9be0bab4228eca5938a">SegmentTypes</a>().end();
<a name="l00191"></a>00191             typeit++) {
<a name="l00192"></a>00192 
<a name="l00193"></a>00193         <a class="code" href="classvotca_1_1ctp_1_1SegmentType.html">SegmentType</a> *type = *typeit;
<a name="l00194"></a>00194 
<a name="l00195"></a>00195         <span class="keywordflow">if</span> (!update) {
<a name="l00196"></a>00196             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(1, <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#a9d490b41236b1c5a43e101e40257c29">getDatabaseId</a>());
<a name="l00197"></a>00197             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(2, type-&gt;<a class="code" href="classvotca_1_1ctp_1_1SegmentType.html#6c17731933fbd602dc503292524c7d08">getTopology</a>()-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#a9d490b41236b1c5a43e101e40257c29">getDatabaseId</a>());
<a name="l00198"></a>00198             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(3, type-&gt;<a class="code" href="classvotca_1_1ctp_1_1SegmentType.html#eb8108fc88b9869e155919c9420836cf">getId</a>());
<a name="l00199"></a>00199             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(4, type-&gt;<a class="code" href="classvotca_1_1ctp_1_1SegmentType.html#496099b8870e3a87692e273f5f5165f1">getName</a>());
<a name="l00200"></a>00200             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(5, type-&gt;<a class="code" href="classvotca_1_1ctp_1_1SegmentType.html#697135b4b3cd37fe76829c30255511b7">getBasisName</a>());
<a name="l00201"></a>00201             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(6, type-&gt;<a class="code" href="classvotca_1_1ctp_1_1SegmentType.html#180dba53609cd3e4c4296ee76a56e8cf">getOrbitalsFile</a>());            
<a name="l00202"></a>00202 
<a name="l00203"></a>00203             <span class="comment">// Process transporting-orbital numbers</span>
<a name="l00204"></a>00204             <span class="comment">// NOTE Obsolete, now read in only for IZindo calculator</span>
<a name="l00205"></a>00205             <span class="comment">// string torbNrs = "";</span>
<a name="l00206"></a>00206             <span class="comment">// vector &lt;int&gt; ::iterator iit;</span>
<a name="l00207"></a>00207             <span class="comment">// for (int i = 0; i &lt; type-&gt;getTOrbNrs().size(); i++) {</span>
<a name="l00208"></a>00208             <span class="comment">//     int    nrInt = (type-&gt;getTOrbNrs())[i];</span>
<a name="l00209"></a>00209             <span class="comment">//     string nrStr = boost::lexical_cast&lt;string&gt;(nrInt);</span>
<a name="l00210"></a>00210             <span class="comment">//     torbNrs += ":" + nrStr;</span>
<a name="l00211"></a>00211             <span class="comment">// }</span>
<a name="l00212"></a>00212             <span class="keywordtype">string</span> torbStr = <span class="stringliteral">"NOT_USED"</span>;
<a name="l00213"></a>00213             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(7, torbStr);
<a name="l00214"></a>00214             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(8, type-&gt;<a class="code" href="classvotca_1_1ctp_1_1SegmentType.html#cc8fee46b7cafd9619f23e41e30397a7">getQMCoordsFile</a>());
<a name="l00215"></a>00215 
<a name="l00216"></a>00216             <span class="keywordtype">int</span> canRigid = 0;
<a name="l00217"></a>00217             <span class="keywordflow">if</span> (type-&gt;<a class="code" href="classvotca_1_1ctp_1_1SegmentType.html#5bd1e3c01632de67e7a8f1777dc10f3b">canRigidify</a>()) { canRigid = 1; }
<a name="l00218"></a>00218             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(9, canRigid);
<a name="l00219"></a>00219         }
<a name="l00220"></a>00220         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#46790a14befa3847466a492ba059b3b2" title="perform an insert step">InsertStep</a>();
<a name="l00221"></a>00221         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#fd24d8e702dfc2eff7defd4e1e4d63b0" title="reset the statment to perform another insert or query">Reset</a>();
<a name="l00222"></a>00222     }
<a name="l00223"></a>00223 
<a name="l00224"></a>00224     <span class="keyword">delete</span> stmt;
<a name="l00225"></a>00225     stmt = NULL;
<a name="l00226"></a>00226 }
<a name="l00227"></a>00227 
<a name="l00228"></a>00228 
<a name="l00229"></a><a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b7c95b179675f18bdd4e1c9cb33b4726">00229</a> <span class="keywordtype">void</span> <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b7c95b179675f18bdd4e1c9cb33b4726">StateSaverSQLite::WriteSegments</a>(<span class="keywordtype">bool</span> update) {
<a name="l00230"></a>00230     cout &lt;&lt; <span class="stringliteral">", segments"</span> &lt;&lt; flush;
<a name="l00231"></a>00231     <a class="code" href="classvotca_1_1tools_1_1Statement.html" title="Wrapper for sqlite prepared statements.">Statement</a> *stmt;
<a name="l00232"></a>00232 
<a name="l00233"></a>00233     <span class="keywordflow">if</span> (!update) {
<a name="l00234"></a>00234         stmt = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b1e5eefa1aeefd87a2fa6eeeb337dad6">_db</a>.<a class="code" href="classvotca_1_1tools_1_1Database.html#fb2a4e03b21b167516b2313d73c96581">Prepare</a>(<span class="stringliteral">"INSERT INTO segments ("</span>
<a name="l00235"></a>00235                             <span class="stringliteral">"frame, top, id,"</span>
<a name="l00236"></a>00236                             <span class="stringliteral">"name, type, mol,"</span>
<a name="l00237"></a>00237                             <span class="stringliteral">"posX, posY, posZ) "</span>
<a name="l00238"></a>00238                             <span class="stringliteral">"VALUES ("</span>
<a name="l00239"></a>00239                             <span class="stringliteral">"?,     ?,  ?,"</span>
<a name="l00240"></a>00240                             <span class="stringliteral">"?,     ?,  ?,"</span>
<a name="l00241"></a>00241                             <span class="stringliteral">"?,     ?,  ?)"</span>);
<a name="l00242"></a>00242     }
<a name="l00243"></a>00243     <span class="keywordflow">else</span> {
<a name="l00244"></a>00244         stmt = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b1e5eefa1aeefd87a2fa6eeeb337dad6">_db</a>.<a class="code" href="classvotca_1_1tools_1_1Database.html#fb2a4e03b21b167516b2313d73c96581">Prepare</a>(<span class="stringliteral">"UPDATE segments "</span>
<a name="l00245"></a>00245                            <span class="stringliteral">"SET "</span>
<a name="l00246"></a>00246                            <span class="stringliteral">"UnCnNe = ?, UnCnNh = ?, UcNcCe = ?,"</span>
<a name="l00247"></a>00247                            <span class="stringliteral">"UcNcCh = ?, UcCnNe = ?, UcCnNh = ?,"</span>
<a name="l00248"></a>00248                            <span class="stringliteral">"eAnion = ?, eNeutral = ?, eCation = ?, "</span>
<a name="l00249"></a>00249                            <span class="stringliteral">"occPe = ?, occPh = ?, has_e = ?, has_h = ? "</span>
<a name="l00250"></a>00250                            <span class="stringliteral">"WHERE top = ? AND id = ?"</span>);
<a name="l00251"></a>00251     }
<a name="l00252"></a>00252 
<a name="l00253"></a>00253     vector &lt; Segment* &gt; ::iterator sit;
<a name="l00254"></a>00254     <span class="keywordflow">for</span> (sit = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#8574c0f1d39f227a22b6bb398adeb9fd">Segments</a>().begin();
<a name="l00255"></a>00255             sit &lt; <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#8574c0f1d39f227a22b6bb398adeb9fd">Segments</a>().end();
<a name="l00256"></a>00256             sit++) {
<a name="l00257"></a>00257         <a class="code" href="classvotca_1_1ctp_1_1Segment.html">Segment</a> *seg = *sit;
<a name="l00258"></a>00258 
<a name="l00259"></a>00259         <span class="keywordflow">if</span> (!update) {
<a name="l00260"></a>00260 
<a name="l00261"></a>00261             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(1, <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#a9d490b41236b1c5a43e101e40257c29">getDatabaseId</a>());
<a name="l00262"></a>00262             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(2, seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#8860581f3a3a1934aaa98ad881fa1177">getTopology</a>()-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#a9d490b41236b1c5a43e101e40257c29">getDatabaseId</a>());
<a name="l00263"></a>00263             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(3, seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#83945ef058d7bb6efb596d04633bb497">getId</a>());
<a name="l00264"></a>00264             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(4, seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#f5a55c31af0b42d2da34ea68c833a8bd">getName</a>());
<a name="l00265"></a>00265             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(5, seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#242835d4f11b859eaee13f8d9f19da72">getType</a>()-&gt;<a class="code" href="classvotca_1_1ctp_1_1SegmentType.html#eb8108fc88b9869e155919c9420836cf">getId</a>());
<a name="l00266"></a>00266             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(6, seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#599d1be171e3e9bc1b117d24057e31d9">getMolecule</a>()-&gt;<a class="code" href="classvotca_1_1ctp_1_1Molecule.html#ebbdf0c200b8298b07c5d7c701502cc3" title="Returns ID of the molecule.">getId</a>());
<a name="l00267"></a>00267             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(7, seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#a05429e4714e6037f0f088cd1db92f2c">getPos</a>().<a class="code" href="classvotca_1_1tools_1_1vec.html#b45304f25d8d52b149491a05b1c09a43" title="read only access to x element">getX</a>());
<a name="l00268"></a>00268             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(8, seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#a05429e4714e6037f0f088cd1db92f2c">getPos</a>().<a class="code" href="classvotca_1_1tools_1_1vec.html#272a8c6a3be544a2b9dd4b9f5960b02f" title="read only access to y element">getY</a>());
<a name="l00269"></a>00269             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(9, seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#a05429e4714e6037f0f088cd1db92f2c">getPos</a>().<a class="code" href="classvotca_1_1tools_1_1vec.html#cc1ceb986d70006789a06cf60169dea4" title="read only access to z element">getZ</a>());
<a name="l00270"></a>00270         }
<a name="l00271"></a>00271 
<a name="l00272"></a>00272         <span class="keywordflow">else</span> {
<a name="l00273"></a>00273 
<a name="l00274"></a>00274             <span class="keywordtype">int</span> has_e = (seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#529efb25f587383067de63724638edfb">hasState</a>(-1)) ? 1 : 0;
<a name="l00275"></a>00275             <span class="keywordtype">int</span> has_h = (seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#529efb25f587383067de63724638edfb">hasState</a>(+1)) ? 1 : 0;
<a name="l00276"></a>00276 
<a name="l00277"></a>00277             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(1, seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#355ad964747c626c063be0f7c42b90cf">getU_nC_nN</a>(-1));
<a name="l00278"></a>00278             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(2, seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#355ad964747c626c063be0f7c42b90cf">getU_nC_nN</a>(+1));
<a name="l00279"></a>00279             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(3, seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#66b2142b406f1a1b7d3aaf352b43fdf9">getU_cN_cC</a>(-1));
<a name="l00280"></a>00280             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(4, seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#66b2142b406f1a1b7d3aaf352b43fdf9">getU_cN_cC</a>(+1));
<a name="l00281"></a>00281             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(5, seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#2859c5f89f39acb6ad1bfcb4ec364deb">getU_cC_nN</a>(-1));
<a name="l00282"></a>00282             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(6, seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#2859c5f89f39acb6ad1bfcb4ec364deb">getU_cC_nN</a>(+1));
<a name="l00283"></a>00283             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(7, seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#0be7697377c5865992140c775aa3693d">getEMpoles</a>(-1));
<a name="l00284"></a>00284             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(8, seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#0be7697377c5865992140c775aa3693d">getEMpoles</a>(0));
<a name="l00285"></a>00285             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(9, seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#0be7697377c5865992140c775aa3693d">getEMpoles</a>(1));
<a name="l00286"></a>00286             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(10,seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#47897cc0acde5666e1e2c2b006001ace">getOcc</a>(-1));
<a name="l00287"></a>00287             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(11,seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#47897cc0acde5666e1e2c2b006001ace">getOcc</a>(+1));
<a name="l00288"></a>00288             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(12,has_e);
<a name="l00289"></a>00289             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(13,has_h);
<a name="l00290"></a>00290             
<a name="l00291"></a>00291             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(14, <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#a9d490b41236b1c5a43e101e40257c29">getDatabaseId</a>());
<a name="l00292"></a>00292             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(15, seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#83945ef058d7bb6efb596d04633bb497">getId</a>());
<a name="l00293"></a>00293         }
<a name="l00294"></a>00294 
<a name="l00295"></a>00295         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#46790a14befa3847466a492ba059b3b2" title="perform an insert step">InsertStep</a>();
<a name="l00296"></a>00296         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#fd24d8e702dfc2eff7defd4e1e4d63b0" title="reset the statment to perform another insert or query">Reset</a>();
<a name="l00297"></a>00297 
<a name="l00298"></a>00298     }
<a name="l00299"></a>00299 
<a name="l00300"></a>00300     <span class="keyword">delete</span> stmt;
<a name="l00301"></a>00301     stmt = NULL;
<a name="l00302"></a>00302 }
<a name="l00303"></a>00303 
<a name="l00304"></a>00304 
<a name="l00305"></a><a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#aa80940a543b0b2e1914a00c72489f43">00305</a> <span class="keywordtype">void</span> <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#aa80940a543b0b2e1914a00c72489f43">StateSaverSQLite::WriteFragments</a>(<span class="keywordtype">bool</span> update) {
<a name="l00306"></a>00306     cout &lt;&lt; <span class="stringliteral">", fragments"</span> &lt;&lt; flush;
<a name="l00307"></a>00307 
<a name="l00308"></a>00308     <a class="code" href="classvotca_1_1tools_1_1Statement.html" title="Wrapper for sqlite prepared statements.">Statement</a> *stmt;
<a name="l00309"></a>00309 
<a name="l00310"></a>00310     <span class="keywordflow">if</span> (! update) {
<a name="l00311"></a>00311         stmt = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b1e5eefa1aeefd87a2fa6eeeb337dad6">_db</a>.<a class="code" href="classvotca_1_1tools_1_1Database.html#fb2a4e03b21b167516b2313d73c96581">Prepare</a>(<span class="stringliteral">"INSERT INTO fragments ("</span>
<a name="l00312"></a>00312                             <span class="stringliteral">"frame, top, id,"</span>
<a name="l00313"></a>00313                             <span class="stringliteral">"name, type, mol,"</span>
<a name="l00314"></a>00314                             <span class="stringliteral">"seg, posX, posY,"</span>
<a name="l00315"></a>00315                             <span class="stringliteral">"posZ, symmetry, leg1,"</span>
<a name="l00316"></a>00316                             <span class="stringliteral">"leg2, leg3 )"</span>
<a name="l00317"></a>00317                             <span class="stringliteral">"VALUES ("</span>
<a name="l00318"></a>00318                             <span class="stringliteral">"?,     ?,  ?,"</span>
<a name="l00319"></a>00319                             <span class="stringliteral">"?,     ?,  ?,"</span>
<a name="l00320"></a>00320                             <span class="stringliteral">"?,     ?,  ?,"</span>
<a name="l00321"></a>00321                             <span class="stringliteral">"?,     ?,  ?,"</span>
<a name="l00322"></a>00322                             <span class="stringliteral">"?,     ?    )"</span>);
<a name="l00323"></a>00323     }
<a name="l00324"></a>00324     <span class="keywordflow">else</span> {
<a name="l00325"></a>00325         <span class="keywordflow">return</span>; <span class="comment">// nothing to do here</span>
<a name="l00326"></a>00326     }
<a name="l00327"></a>00327 
<a name="l00328"></a>00328     stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(1, <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#a9d490b41236b1c5a43e101e40257c29">getDatabaseId</a>());
<a name="l00329"></a>00329 
<a name="l00330"></a>00330     vector &lt; Fragment* &gt; ::iterator fit;
<a name="l00331"></a>00331     <span class="keywordflow">for</span> (fit = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#f9a39a581bdb57df0034a8e76e795893">Fragments</a>().begin();
<a name="l00332"></a>00332             fit &lt; <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#f9a39a581bdb57df0034a8e76e795893">Fragments</a>().end();
<a name="l00333"></a>00333             fit++) {
<a name="l00334"></a>00334         <a class="code" href="classvotca_1_1ctp_1_1Fragment.html" title="Rigid fragment. One conjugated segment contains several rigid fragments.">Fragment</a> *frag = *fit;
<a name="l00335"></a>00335 
<a name="l00336"></a>00336         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(2, frag-&gt;<a class="code" href="classvotca_1_1ctp_1_1Fragment.html#f39656c0e41cf9992fff66cbe9b05248">getTopology</a>()-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#a9d490b41236b1c5a43e101e40257c29">getDatabaseId</a>());
<a name="l00337"></a>00337         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(3, frag-&gt;<a class="code" href="classvotca_1_1ctp_1_1Fragment.html#923551b96b820f46d78f0b260b9f4861">getId</a>());
<a name="l00338"></a>00338         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(4, frag-&gt;<a class="code" href="classvotca_1_1ctp_1_1Fragment.html#fb2bfd5a74a05b79e478c1d9d62a5d50">getName</a>());
<a name="l00339"></a>00339         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(5, frag-&gt;<a class="code" href="classvotca_1_1ctp_1_1Fragment.html#fb2bfd5a74a05b79e478c1d9d62a5d50">getName</a>());
<a name="l00340"></a>00340         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(6, frag-&gt;<a class="code" href="classvotca_1_1ctp_1_1Fragment.html#72bd37b503218f2373bbb4256f61cce5">getMolecule</a>()-&gt;<a class="code" href="classvotca_1_1ctp_1_1Molecule.html#ebbdf0c200b8298b07c5d7c701502cc3" title="Returns ID of the molecule.">getId</a>());
<a name="l00341"></a>00341         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(7, frag-&gt;<a class="code" href="classvotca_1_1ctp_1_1Fragment.html#4e2ce10bc38b028070ecd8ad7e97ebdc">getSegment</a>()-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#83945ef058d7bb6efb596d04633bb497">getId</a>());
<a name="l00342"></a>00342         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(8, frag-&gt;<a class="code" href="classvotca_1_1ctp_1_1Fragment.html#6752c9f2ffabaa20594b664d4687950a">getPos</a>().<a class="code" href="classvotca_1_1tools_1_1vec.html#b45304f25d8d52b149491a05b1c09a43" title="read only access to x element">getX</a>());
<a name="l00343"></a>00343         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(9, frag-&gt;<a class="code" href="classvotca_1_1ctp_1_1Fragment.html#6752c9f2ffabaa20594b664d4687950a">getPos</a>().<a class="code" href="classvotca_1_1tools_1_1vec.html#272a8c6a3be544a2b9dd4b9f5960b02f" title="read only access to y element">getY</a>());
<a name="l00344"></a>00344         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(10,frag-&gt;<a class="code" href="classvotca_1_1ctp_1_1Fragment.html#6752c9f2ffabaa20594b664d4687950a">getPos</a>().<a class="code" href="classvotca_1_1tools_1_1vec.html#cc1ceb986d70006789a06cf60169dea4" title="read only access to z element">getZ</a>());
<a name="l00345"></a>00345         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(11,frag-&gt;<a class="code" href="classvotca_1_1ctp_1_1Fragment.html#e20700b2e896cd9ab6ecaccfc1f17255">getSymmetry</a>());
<a name="l00346"></a>00346         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(12,frag-&gt;<a class="code" href="classvotca_1_1ctp_1_1Fragment.html#27a5619f09c8f0af88c7a634358dcb9a">getTrihedron</a>()[0]);
<a name="l00347"></a>00347         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(13,frag-&gt;<a class="code" href="classvotca_1_1ctp_1_1Fragment.html#27a5619f09c8f0af88c7a634358dcb9a">getTrihedron</a>()[1]);
<a name="l00348"></a>00348         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(14,frag-&gt;<a class="code" href="classvotca_1_1ctp_1_1Fragment.html#27a5619f09c8f0af88c7a634358dcb9a">getTrihedron</a>()[2]);
<a name="l00349"></a>00349 
<a name="l00350"></a>00350         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#46790a14befa3847466a492ba059b3b2" title="perform an insert step">InsertStep</a>();
<a name="l00351"></a>00351         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#fd24d8e702dfc2eff7defd4e1e4d63b0" title="reset the statment to perform another insert or query">Reset</a>();
<a name="l00352"></a>00352     }
<a name="l00353"></a>00353 
<a name="l00354"></a>00354     <span class="keyword">delete</span> stmt;
<a name="l00355"></a>00355     stmt = NULL;
<a name="l00356"></a>00356 }
<a name="l00357"></a>00357 
<a name="l00358"></a>00358 
<a name="l00359"></a><a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#d6a481e1c748bba7d4940c28891bdfcd">00359</a> <span class="keywordtype">void</span> <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#d6a481e1c748bba7d4940c28891bdfcd">StateSaverSQLite::WriteAtoms</a>(<span class="keywordtype">bool</span> update) {
<a name="l00360"></a>00360 
<a name="l00361"></a>00361     cout &lt;&lt; <span class="stringliteral">", atoms"</span> &lt;&lt; flush;
<a name="l00362"></a>00362 
<a name="l00363"></a>00363     <a class="code" href="classvotca_1_1tools_1_1Statement.html" title="Wrapper for sqlite prepared statements.">Statement</a> *stmt;
<a name="l00364"></a>00364     <span class="keywordflow">if</span> (! update) {
<a name="l00365"></a>00365         stmt = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b1e5eefa1aeefd87a2fa6eeeb337dad6">_db</a>.<a class="code" href="classvotca_1_1tools_1_1Database.html#fb2a4e03b21b167516b2313d73c96581">Prepare</a>(<span class="stringliteral">"INSERT INTO atoms ("</span>
<a name="l00366"></a>00366                             <span class="stringliteral">"frame, top, id,"</span>
<a name="l00367"></a>00367                             <span class="stringliteral">"name, type, mol,"</span>
<a name="l00368"></a>00368                             <span class="stringliteral">"seg, frag,  resnr,"</span>
<a name="l00369"></a>00369                             <span class="stringliteral">"resname, posX, posY,"</span>
<a name="l00370"></a>00370                             <span class="stringliteral">"posZ, weight, qmid,"</span>
<a name="l00371"></a>00371                             <span class="stringliteral">"qmPosX, qmPosY, qmPosZ,"</span>
<a name="l00372"></a>00372                             <span class="stringliteral">"element )"</span>
<a name="l00373"></a>00373                             <span class="stringliteral">"VALUES ("</span>
<a name="l00374"></a>00374                             <span class="stringliteral">"?,     ?,  ?,"</span>
<a name="l00375"></a>00375                             <span class="stringliteral">"?,     ?,  ?,"</span>
<a name="l00376"></a>00376                             <span class="stringliteral">"?,     ?,  ?,"</span>
<a name="l00377"></a>00377                             <span class="stringliteral">"?,     ?,  ?,"</span>
<a name="l00378"></a>00378                             <span class="stringliteral">"?,     ?,  ?,"</span>
<a name="l00379"></a>00379                             <span class="stringliteral">"?,     ?,  ?,"</span>
<a name="l00380"></a>00380                             <span class="stringliteral">"? )"</span>);
<a name="l00381"></a>00381     }
<a name="l00382"></a>00382     <span class="keywordflow">else</span> {
<a name="l00383"></a>00383         <span class="keywordflow">return</span>; <span class="comment">// nothing to do here</span>
<a name="l00384"></a>00384     }
<a name="l00385"></a>00385 
<a name="l00386"></a>00386     stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(1, <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#a9d490b41236b1c5a43e101e40257c29">getDatabaseId</a>());
<a name="l00387"></a>00387 
<a name="l00388"></a>00388     vector &lt; Atom* &gt; ::iterator ait;
<a name="l00389"></a>00389     <span class="keywordflow">for</span> (ait = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#5a9b8b9c2dd45afdd451ffb2fce21ed8">Atoms</a>().begin();
<a name="l00390"></a>00390             ait &lt; <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#5a9b8b9c2dd45afdd451ffb2fce21ed8">Atoms</a>().end();
<a name="l00391"></a>00391             ait++) {
<a name="l00392"></a>00392         <a class="code" href="classvotca_1_1ctp_1_1Atom.html" title="information about an atom">Atom</a> *atm = *ait;
<a name="l00393"></a>00393         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(2, atm-&gt;<a class="code" href="classvotca_1_1ctp_1_1Atom.html#dbd1f8042a333ef2171d300c98b5ea22">getTopology</a>()-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#a9d490b41236b1c5a43e101e40257c29">getDatabaseId</a>());
<a name="l00394"></a>00394         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(3, atm-&gt;<a class="code" href="classvotca_1_1ctp_1_1Atom.html#7d118d5a2771f7dc68b44edbf67cda60">getId</a>());
<a name="l00395"></a>00395         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(4, atm-&gt;<a class="code" href="classvotca_1_1ctp_1_1Atom.html#172eb27d09bcfce0559c0e8053981e23">getName</a>());
<a name="l00396"></a>00396         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(5, atm-&gt;<a class="code" href="classvotca_1_1ctp_1_1Atom.html#172eb27d09bcfce0559c0e8053981e23">getName</a>());
<a name="l00397"></a>00397         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(6, atm-&gt;<a class="code" href="classvotca_1_1ctp_1_1Atom.html#157172fc51050d289037056ad9c257f7">getMolecule</a>()-&gt;<a class="code" href="classvotca_1_1ctp_1_1Molecule.html#ebbdf0c200b8298b07c5d7c701502cc3" title="Returns ID of the molecule.">getId</a>());
<a name="l00398"></a>00398         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(7, atm-&gt;<a class="code" href="classvotca_1_1ctp_1_1Atom.html#234dfddceeb05ac636e834b918fe4e42">getSegment</a>()-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#83945ef058d7bb6efb596d04633bb497">getId</a>());
<a name="l00399"></a>00399         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(8, atm-&gt;<a class="code" href="classvotca_1_1ctp_1_1Atom.html#b7e02f1c03097c1bd7974165bbbab05b">getFragment</a>()-&gt;<a class="code" href="classvotca_1_1ctp_1_1Fragment.html#923551b96b820f46d78f0b260b9f4861">getId</a>());
<a name="l00400"></a>00400         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(9, atm-&gt;<a class="code" href="classvotca_1_1ctp_1_1Atom.html#b09f5d4961d04c58cbbcbbfbe175126b">getResnr</a>());
<a name="l00401"></a>00401         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(10, atm-&gt;<a class="code" href="classvotca_1_1ctp_1_1Atom.html#6342d0f7eed793108c12563511480039">getResname</a>());
<a name="l00402"></a>00402         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(11, atm-&gt;<a class="code" href="classvotca_1_1ctp_1_1Atom.html#eaaedc427b46cab7d6325c68eb75770e">getPos</a>().<a class="code" href="classvotca_1_1tools_1_1vec.html#b45304f25d8d52b149491a05b1c09a43" title="read only access to x element">getX</a>());
<a name="l00403"></a>00403         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(12, atm-&gt;<a class="code" href="classvotca_1_1ctp_1_1Atom.html#eaaedc427b46cab7d6325c68eb75770e">getPos</a>().<a class="code" href="classvotca_1_1tools_1_1vec.html#272a8c6a3be544a2b9dd4b9f5960b02f" title="read only access to y element">getY</a>());
<a name="l00404"></a>00404         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(13, atm-&gt;<a class="code" href="classvotca_1_1ctp_1_1Atom.html#eaaedc427b46cab7d6325c68eb75770e">getPos</a>().<a class="code" href="classvotca_1_1tools_1_1vec.html#cc1ceb986d70006789a06cf60169dea4" title="read only access to z element">getZ</a>());
<a name="l00405"></a>00405         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(14, atm-&gt;<a class="code" href="classvotca_1_1ctp_1_1Atom.html#72dec1122103687fe5698bae1b9a5b8e">getWeight</a>());
<a name="l00406"></a>00406         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(15, atm-&gt;<a class="code" href="classvotca_1_1ctp_1_1Atom.html#8cddf9c6f70bc57eb5275f28e54cfc20">getQMId</a>());
<a name="l00407"></a>00407         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(16, atm-&gt;<a class="code" href="classvotca_1_1ctp_1_1Atom.html#b0227bd1466d92cf9d3f33621a863265">getQMPos</a>().<a class="code" href="classvotca_1_1tools_1_1vec.html#b45304f25d8d52b149491a05b1c09a43" title="read only access to x element">getX</a>());
<a name="l00408"></a>00408         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(17, atm-&gt;<a class="code" href="classvotca_1_1ctp_1_1Atom.html#b0227bd1466d92cf9d3f33621a863265">getQMPos</a>().<a class="code" href="classvotca_1_1tools_1_1vec.html#272a8c6a3be544a2b9dd4b9f5960b02f" title="read only access to y element">getY</a>());
<a name="l00409"></a>00409         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(18, atm-&gt;<a class="code" href="classvotca_1_1ctp_1_1Atom.html#b0227bd1466d92cf9d3f33621a863265">getQMPos</a>().<a class="code" href="classvotca_1_1tools_1_1vec.html#cc1ceb986d70006789a06cf60169dea4" title="read only access to z element">getZ</a>());
<a name="l00410"></a>00410         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(19, atm-&gt;<a class="code" href="classvotca_1_1ctp_1_1Atom.html#0de5b404b9ce3b8c6f3d7733cfcfd65d">getElement</a>());
<a name="l00411"></a>00411 
<a name="l00412"></a>00412         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#46790a14befa3847466a492ba059b3b2" title="perform an insert step">InsertStep</a>();
<a name="l00413"></a>00413         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#fd24d8e702dfc2eff7defd4e1e4d63b0" title="reset the statment to perform another insert or query">Reset</a>();
<a name="l00414"></a>00414     }
<a name="l00415"></a>00415     <span class="keyword">delete</span> stmt;
<a name="l00416"></a>00416     stmt = NULL;
<a name="l00417"></a>00417 }
<a name="l00418"></a>00418 
<a name="l00419"></a>00419 
<a name="l00420"></a><a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#abb4843ef512fdd31276ca18ddb2a94d">00420</a> <span class="keywordtype">void</span> <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#abb4843ef512fdd31276ca18ddb2a94d">StateSaverSQLite::WritePairs</a>(<span class="keywordtype">bool</span> update) {
<a name="l00421"></a>00421     <span class="keywordflow">if</span> ( ! <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#c546b928e29e690be03b3f273e9e2d05">NBList</a>().<a class="code" href="classvotca_1_1csg_1_1PairList.html#156d2070b44ee9dd1f85f541c1c1b93d">size</a>() ) { <span class="keywordflow">return</span>; }
<a name="l00422"></a>00422     
<a name="l00423"></a>00423     cout &lt;&lt; <span class="stringliteral">", pairs"</span> &lt;&lt; flush;
<a name="l00424"></a>00424 
<a name="l00425"></a>00425     <a class="code" href="classvotca_1_1tools_1_1Statement.html" title="Wrapper for sqlite prepared statements.">Statement</a> *stmt;
<a name="l00426"></a>00426     
<a name="l00427"></a>00427     <span class="comment">// Find out whether pairs for this topology have already been created</span>
<a name="l00428"></a>00428     stmt = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b1e5eefa1aeefd87a2fa6eeeb337dad6">_db</a>.<a class="code" href="classvotca_1_1tools_1_1Database.html#fb2a4e03b21b167516b2313d73c96581">Prepare</a>(<span class="stringliteral">"SELECT id FROM pairs WHERE top = ?;"</span>);
<a name="l00429"></a>00429     stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(1, <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#a9d490b41236b1c5a43e101e40257c29">getDatabaseId</a>());
<a name="l00430"></a>00430     <span class="keywordflow">if</span> (stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#676ec07b2df9828eb8cd97b06cd99122" title="perform a step">Step</a>() == SQLITE_DONE) { 
<a name="l00431"></a>00431         update = <span class="keyword">false</span>;        
<a name="l00432"></a>00432         cout &lt;&lt; <span class="stringliteral">" (create)"</span> &lt;&lt; flush;
<a name="l00433"></a>00433     }
<a name="l00434"></a>00434     <span class="keywordflow">else</span> { update = <span class="keyword">true</span>; }
<a name="l00435"></a>00435     <span class="keyword">delete</span> stmt;
<a name="l00436"></a>00436     stmt = NULL;
<a name="l00437"></a>00437 
<a name="l00438"></a>00438     <span class="keywordflow">if</span> (!update) {
<a name="l00439"></a>00439         stmt = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b1e5eefa1aeefd87a2fa6eeeb337dad6">_db</a>.<a class="code" href="classvotca_1_1tools_1_1Database.html#fb2a4e03b21b167516b2313d73c96581">Prepare</a>(<span class="stringliteral">"INSERT INTO pairs ("</span>
<a name="l00440"></a>00440                            <span class="stringliteral">"frame, top, id, "</span>
<a name="l00441"></a>00441                            <span class="stringliteral">"seg1, seg2, drX, "</span>
<a name="l00442"></a>00442                            <span class="stringliteral">"drY, drZ,   "</span>
<a name="l00443"></a>00443                            <span class="stringliteral">"has_e, has_h, "</span>
<a name="l00444"></a>00444                            <span class="stringliteral">"lOe, lOh, rate12e, "</span>
<a name="l00445"></a>00445                            <span class="stringliteral">"rate21e, rate12h, rate21h, "</span>
<a name="l00446"></a>00446                            <span class="stringliteral">"Jeff2e,  Jeff2h "</span>
<a name="l00447"></a>00447                            <span class="stringliteral">") VALUES ("</span>
<a name="l00448"></a>00448                            <span class="stringliteral">"?, ?, ?, "</span>
<a name="l00449"></a>00449                            <span class="stringliteral">"?, ?, ?, "</span>
<a name="l00450"></a>00450                            <span class="stringliteral">"?, ?, "</span>
<a name="l00451"></a>00451                            <span class="stringliteral">"?, ?, "</span>
<a name="l00452"></a>00452                            <span class="stringliteral">"?, ?, ?, "</span>
<a name="l00453"></a>00453                            <span class="stringliteral">"?, ?, ?, "</span>
<a name="l00454"></a>00454                            <span class="stringliteral">"?, ? "</span>
<a name="l00455"></a>00455                            <span class="stringliteral">")"</span>);
<a name="l00456"></a>00456     }
<a name="l00457"></a>00457     <span class="keywordflow">else</span> {
<a name="l00458"></a>00458         stmt = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b1e5eefa1aeefd87a2fa6eeeb337dad6">_db</a>.<a class="code" href="classvotca_1_1tools_1_1Database.html#fb2a4e03b21b167516b2313d73c96581">Prepare</a>(<span class="stringliteral">"UPDATE pairs "</span>
<a name="l00459"></a>00459                            <span class="stringliteral">"SET "</span>
<a name="l00460"></a>00460                            <span class="stringliteral">"has_e = ?, has_h = ?, "</span>
<a name="l00461"></a>00461                            <span class="stringliteral">"lOe = ?, lOh = ?, rate12e = ?, "</span>
<a name="l00462"></a>00462                            <span class="stringliteral">"rate21e = ?, rate12h = ?, rate21h = ?, "</span>
<a name="l00463"></a>00463                            <span class="stringliteral">"Jeff2e = ?,  Jeff2h = ? "</span>
<a name="l00464"></a>00464                            <span class="stringliteral">"WHERE top = ? AND id = ?"</span>);
<a name="l00465"></a>00465     }
<a name="l00466"></a>00466 
<a name="l00467"></a>00467     <a class="code" href="classvotca_1_1csg_1_1PairList.html#8341cf06ea420f03dcb5160119278a8a">QMNBList::iterator</a> nit;
<a name="l00468"></a>00468 
<a name="l00469"></a>00469     <span class="keywordflow">for</span> (nit = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#c546b928e29e690be03b3f273e9e2d05">NBList</a>().<a class="code" href="classvotca_1_1csg_1_1PairList.html#777aae1be02460855d63db209b7e7cbd">begin</a>();
<a name="l00470"></a>00470          nit != <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#c546b928e29e690be03b3f273e9e2d05">NBList</a>().<a class="code" href="classvotca_1_1csg_1_1PairList.html#0ce372735a6cd3bacbe3cc9402d795a5">end</a>();
<a name="l00471"></a>00471          nit++) {
<a name="l00472"></a>00472 
<a name="l00473"></a>00473         <a class="code" href="classvotca_1_1ctp_1_1QMPair.html">QMPair</a> *pair = *nit;
<a name="l00474"></a>00474 
<a name="l00475"></a>00475         <span class="keywordflow">if</span> (!update) {
<a name="l00476"></a>00476 
<a name="l00477"></a>00477             <span class="keywordtype">int</span> has_e = (pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#44f91ebeba8a6cd996c3c063b09270bc">isPathCarrier</a>(-1)) ? 1 : 0;
<a name="l00478"></a>00478             <span class="keywordtype">int</span> has_h = (pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#44f91ebeba8a6cd996c3c063b09270bc">isPathCarrier</a>(+1)) ? 1 : 0;
<a name="l00479"></a>00479 
<a name="l00480"></a>00480             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(1, <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#a9d490b41236b1c5a43e101e40257c29">getDatabaseId</a>());
<a name="l00481"></a>00481             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(2, pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#82393aa8292f8bc8d0aa3e320c14186d">getTopology</a>()-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#a9d490b41236b1c5a43e101e40257c29">getDatabaseId</a>());
<a name="l00482"></a>00482             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(3, pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#24b39a974865abbf243b3a86a86601a2">getId</a>());
<a name="l00483"></a>00483             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(4, pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#b6f64a9a1299f322aa4c76ac39815327">Seg1PbCopy</a>()-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#83945ef058d7bb6efb596d04633bb497">getId</a>());
<a name="l00484"></a>00484             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(5, pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#8fd5eaaa0814e027e29a39bdf962469d">Seg2PbCopy</a>()-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#83945ef058d7bb6efb596d04633bb497">getId</a>());
<a name="l00485"></a>00485             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(6, pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#1e140e8d091f6b243978e93de7651071">R</a>().<a class="code" href="classvotca_1_1tools_1_1vec.html#b45304f25d8d52b149491a05b1c09a43" title="read only access to x element">getX</a>());
<a name="l00486"></a>00486             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(7, pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#1e140e8d091f6b243978e93de7651071">R</a>().<a class="code" href="classvotca_1_1tools_1_1vec.html#272a8c6a3be544a2b9dd4b9f5960b02f" title="read only access to y element">getY</a>());
<a name="l00487"></a>00487             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(8, pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#1e140e8d091f6b243978e93de7651071">R</a>().<a class="code" href="classvotca_1_1tools_1_1vec.html#cc1ceb986d70006789a06cf60169dea4" title="read only access to z element">getZ</a>());
<a name="l00488"></a>00488             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(9, has_e);
<a name="l00489"></a>00489             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(10, has_h);
<a name="l00490"></a>00490             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(11, pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#279f7a533caa9b1cafbbfc909e7de695">getLambdaO</a>(-1));
<a name="l00491"></a>00491             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(12, pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#279f7a533caa9b1cafbbfc909e7de695">getLambdaO</a>(+1));
<a name="l00492"></a>00492             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(13, pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#625deeea83891128a4d06eb615a88e93">getRate12</a>(-1));
<a name="l00493"></a>00493             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(14, pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#4b90ac8a051e69570f1c7ddbbbc61e16">getRate21</a>(-1));
<a name="l00494"></a>00494             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(15, pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#625deeea83891128a4d06eb615a88e93">getRate12</a>(+1));
<a name="l00495"></a>00495             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(16, pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#4b90ac8a051e69570f1c7ddbbbc61e16">getRate21</a>(+1));
<a name="l00496"></a>00496             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(17, pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#6f71c419dba4517745a6a1701ad1a533">getJeff2</a>(-1));
<a name="l00497"></a>00497             stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(18, pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#6f71c419dba4517745a6a1701ad1a533">getJeff2</a>(+1));
<a name="l00498"></a>00498         }
<a name="l00499"></a>00499         
<a name="l00500"></a>00500         <span class="keywordflow">else</span> {
<a name="l00501"></a>00501 
<a name="l00502"></a>00502             <span class="comment">// cout &lt;&lt; "\r " &lt;&lt; pair-&gt;getId() &lt;&lt; flush;</span>
<a name="l00503"></a>00503 
<a name="l00504"></a>00504                 <span class="keywordtype">int</span> has_e = (pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#44f91ebeba8a6cd996c3c063b09270bc">isPathCarrier</a>(-1)) ? 1 : 0;
<a name="l00505"></a>00505                 <span class="keywordtype">int</span> has_h = (pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#44f91ebeba8a6cd996c3c063b09270bc">isPathCarrier</a>(+1)) ? 1 : 0;
<a name="l00506"></a>00506 
<a name="l00507"></a>00507                 stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(1, has_e);
<a name="l00508"></a>00508                 stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(2, has_h);
<a name="l00509"></a>00509                 stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(3, pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#279f7a533caa9b1cafbbfc909e7de695">getLambdaO</a>(-1));
<a name="l00510"></a>00510                 stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(4, pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#279f7a533caa9b1cafbbfc909e7de695">getLambdaO</a>(+1));
<a name="l00511"></a>00511                 stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(5, pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#625deeea83891128a4d06eb615a88e93">getRate12</a>(-1));
<a name="l00512"></a>00512                 stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(6, pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#4b90ac8a051e69570f1c7ddbbbc61e16">getRate21</a>(-1));
<a name="l00513"></a>00513                 stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(7, pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#625deeea83891128a4d06eb615a88e93">getRate12</a>(+1));
<a name="l00514"></a>00514                 stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(8, pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#4b90ac8a051e69570f1c7ddbbbc61e16">getRate21</a>(+1));
<a name="l00515"></a>00515                 stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(9, pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#6f71c419dba4517745a6a1701ad1a533">getJeff2</a>(-1));
<a name="l00516"></a>00516                 stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(10, pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#6f71c419dba4517745a6a1701ad1a533">getJeff2</a>(+1));
<a name="l00517"></a>00517                 stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(11, pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#82393aa8292f8bc8d0aa3e320c14186d">getTopology</a>()-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#a9d490b41236b1c5a43e101e40257c29">getDatabaseId</a>());
<a name="l00518"></a>00518                 stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(12, pair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#24b39a974865abbf243b3a86a86601a2">getId</a>());
<a name="l00519"></a>00519         }
<a name="l00520"></a>00520 
<a name="l00521"></a>00521         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#46790a14befa3847466a492ba059b3b2" title="perform an insert step">InsertStep</a>();
<a name="l00522"></a>00522         stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#fd24d8e702dfc2eff7defd4e1e4d63b0" title="reset the statment to perform another insert or query">Reset</a>();
<a name="l00523"></a>00523     }
<a name="l00524"></a>00524 
<a name="l00525"></a>00525     <span class="keyword">delete</span> stmt;
<a name="l00526"></a>00526     stmt = NULL;
<a name="l00527"></a>00527 }
<a name="l00528"></a>00528 
<a name="l00529"></a>00529 
<a name="l00530"></a>00530 
<a name="l00531"></a>00531 
<a name="l00532"></a><a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b7691da631846676de965c6f8b4af46a">00532</a> <span class="keywordtype">bool</span> <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b7691da631846676de965c6f8b4af46a">StateSaverSQLite::NextFrame</a>() {
<a name="l00533"></a>00533 
<a name="l00534"></a>00534     <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#ef070ecc34d6564591a9db802c1d69bf">_current_frame</a>++;
<a name="l00535"></a>00535 
<a name="l00536"></a>00536     <span class="keywordflow">if</span>(<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#ef070ecc34d6564591a9db802c1d69bf">_current_frame</a> &gt;= <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#4073b7b3e098ab893f8fb0efe342586e">_frames</a>.size()) {
<a name="l00537"></a>00537         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00538"></a>00538     }
<a name="l00539"></a>00539     <span class="keywordflow">else</span> {
<a name="l00540"></a>00540         this-&gt;<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#7ea23291feb5a2cfb8d79d4cf1503c7d">ReadFrame</a>();
<a name="l00541"></a>00541         <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#a696795ba867e472d1b11253eae8aceb">_was_read</a>=<span class="keyword">true</span>;
<a name="l00542"></a>00542         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00543"></a>00543     }
<a name="l00544"></a>00544 
<a name="l00545"></a>00545 }
<a name="l00546"></a>00546 
<a name="l00547"></a>00547 
<a name="l00548"></a><a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#7ea23291feb5a2cfb8d79d4cf1503c7d">00548</a> <span class="keywordtype">void</span> <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#7ea23291feb5a2cfb8d79d4cf1503c7d">StateSaverSQLite::ReadFrame</a>() {
<a name="l00549"></a>00549 
<a name="l00550"></a>00550     <span class="keywordtype">int</span> topId = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#8f2e4c8435645ec11b0b2d9bcd99b2fc">_topIds</a>[<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#ef070ecc34d6564591a9db802c1d69bf">_current_frame</a>];
<a name="l00551"></a>00551 
<a name="l00552"></a>00552     cout &lt;&lt; <span class="stringliteral">"Import MD+QM Topology ID "</span> &lt;&lt; topId
<a name="l00553"></a>00553          &lt;&lt; <span class="stringliteral">" (i.e. frame "</span> &lt;&lt; <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#ef070ecc34d6564591a9db802c1d69bf">_current_frame</a> &lt;&lt; <span class="stringliteral">")"</span>
<a name="l00554"></a>00554          &lt;&lt; <span class="stringliteral">" from "</span> &lt;&lt; <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#3f4f12eb20069e65bf66bf22733cc63e">_sqlfile</a> &lt;&lt; endl;
<a name="l00555"></a>00555     cout &lt;&lt; <span class="stringliteral">"..."</span>;
<a name="l00556"></a>00556 
<a name="l00557"></a>00557     <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#a69398a07db2978a3e8dc238f0d132d2">CleanUp</a>();    
<a name="l00558"></a>00558     <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#07716c519d6052620a1bd645c022281f">setDatabaseId</a>(topId);
<a name="l00559"></a>00559     
<a name="l00560"></a>00560     
<a name="l00561"></a>00561     this-&gt;<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#3153a757fbc1798f724d18163bd112e0">ReadMeta</a>(topId);
<a name="l00562"></a>00562     this-&gt;<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#c8f8fad635a77ac3ca7b94df5e0bc190">ReadMolecules</a>(topId);
<a name="l00563"></a>00563     this-&gt;<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#5ee0bd1c573e887eed60df5db75cfdb0">ReadSegTypes</a>(topId);
<a name="l00564"></a>00564     this-&gt;<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#5da1138adcb3e1c43735ba287888fc9a">ReadSegments</a>(topId);
<a name="l00565"></a>00565     this-&gt;<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#791b80d2da8e511a284cd092c61bfbb5">ReadFragments</a>(topId);
<a name="l00566"></a>00566     this-&gt;<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#147cb9030b936fe7e62aee114fa106e6">ReadAtoms</a>(topId);    
<a name="l00567"></a>00567     this-&gt;<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#866159b49d96507b9b9dd50b5742b7db">ReadPairs</a>(topId);
<a name="l00568"></a>00568     
<a name="l00569"></a>00569     cout &lt;&lt; <span class="stringliteral">". "</span> &lt;&lt; endl;
<a name="l00570"></a>00570 }
<a name="l00571"></a>00571 
<a name="l00572"></a>00572 
<a name="l00573"></a><a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#3153a757fbc1798f724d18163bd112e0">00573</a> <span class="keywordtype">void</span> <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#3153a757fbc1798f724d18163bd112e0">StateSaverSQLite::ReadMeta</a>(<span class="keywordtype">int</span> topId) {
<a name="l00574"></a>00574 
<a name="l00575"></a>00575     <a class="code" href="classvotca_1_1tools_1_1Statement.html" title="Wrapper for sqlite prepared statements.">Statement</a> *stmt = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b1e5eefa1aeefd87a2fa6eeeb337dad6">_db</a>.<a class="code" href="classvotca_1_1tools_1_1Database.html#fb2a4e03b21b167516b2313d73c96581">Prepare</a>(<span class="stringliteral">"SELECT "</span>
<a name="l00576"></a>00576                                   <span class="stringliteral">"time, step, "</span>
<a name="l00577"></a>00577                                   <span class="stringliteral">"box11, box12, box13, "</span>
<a name="l00578"></a>00578                                   <span class="stringliteral">"box21, box22, box23, "</span>
<a name="l00579"></a>00579                                   <span class="stringliteral">"box31, box32, box33, "</span>
<a name="l00580"></a>00580                                   <span class="stringliteral">"canRigid "</span>
<a name="l00581"></a>00581                                   <span class="stringliteral">"FROM frames WHERE "</span>
<a name="l00582"></a>00582                                   <span class="stringliteral">"id = ?;"</span>);
<a name="l00583"></a>00583     stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(1, topId);
<a name="l00584"></a>00584 
<a name="l00585"></a>00585     <span class="keywordflow">if</span> (stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#676ec07b2df9828eb8cd97b06cd99122" title="perform a step">Step</a>() == SQLITE_DONE) {
<a name="l00586"></a>00586         <span class="comment">// ReadFrame should not have been called in the first place:</span>
<a name="l00587"></a>00587         <span class="keywordflow">throw</span> runtime_error(<span class="stringliteral">"Database appears to be broken. Abort..."</span>);
<a name="l00588"></a>00588     }
<a name="l00589"></a>00589 
<a name="l00590"></a>00590     <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#ffae8470d03baf5025887e5c1b068ba5">setTime</a>(stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(0));
<a name="l00591"></a>00591     <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#6b152f6ffddcaf4173f4f4c6c9697088">setStep</a>(stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">int</span>&gt;(1));
<a name="l00592"></a>00592     <a class="code" href="classvotca_1_1tools_1_1matrix.html">matrix</a> boxv;
<a name="l00593"></a>00593     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacedensity__symmetrize.html#70312de6d597e9aea75ba426b32aa62c">i</a> = 0; <a class="code" href="namespacedensity__symmetrize.html#70312de6d597e9aea75ba426b32aa62c">i</a> &lt; 3; <a class="code" href="namespacedensity__symmetrize.html#70312de6d597e9aea75ba426b32aa62c">i</a>++) {
<a name="l00594"></a>00594         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceDIPRO__TI.html#99261ba49d59ae81748f691217dc6721">j</a> = 0; <a class="code" href="namespaceDIPRO__TI.html#99261ba49d59ae81748f691217dc6721">j</a> &lt; 3; <a class="code" href="namespaceDIPRO__TI.html#99261ba49d59ae81748f691217dc6721">j</a>++) {
<a name="l00595"></a>00595             boxv.<a class="code" href="classvotca_1_1tools_1_1matrix.html#163a2e7de6a158f651c6fce79fc313df" title="set an element of the matrix">set</a>(<a class="code" href="namespacedensity__symmetrize.html#70312de6d597e9aea75ba426b32aa62c">i</a>, <a class="code" href="namespaceDIPRO__TI.html#99261ba49d59ae81748f691217dc6721">j</a>, stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(2+3*<a class="code" href="namespacedensity__symmetrize.html#70312de6d597e9aea75ba426b32aa62c">i</a>+<a class="code" href="namespaceDIPRO__TI.html#99261ba49d59ae81748f691217dc6721">j</a>));
<a name="l00596"></a>00596         }
<a name="l00597"></a>00597     }
<a name="l00598"></a>00598     <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#cbbf3b2312de6403e97554ada4cf9b31">setBox</a>(boxv);
<a name="l00599"></a>00599     <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#314d62d68751d83b5268623dad643351">setCanRigidify</a>(stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">int</span>&gt;(11));
<a name="l00600"></a>00600     <span class="keyword">delete</span> stmt;
<a name="l00601"></a>00601     stmt = NULL;
<a name="l00602"></a>00602 }
<a name="l00603"></a>00603 
<a name="l00604"></a>00604 
<a name="l00605"></a><a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#c8f8fad635a77ac3ca7b94df5e0bc190">00605</a> <span class="keywordtype">void</span> <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#c8f8fad635a77ac3ca7b94df5e0bc190">StateSaverSQLite::ReadMolecules</a>(<span class="keywordtype">int</span> topId) {
<a name="l00606"></a>00606 
<a name="l00607"></a>00607     cout &lt;&lt; <span class="stringliteral">" Molecules"</span> &lt;&lt; flush;
<a name="l00608"></a>00608 
<a name="l00609"></a>00609     <a class="code" href="classvotca_1_1tools_1_1Statement.html" title="Wrapper for sqlite prepared statements.">Statement</a> *stmt = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b1e5eefa1aeefd87a2fa6eeeb337dad6">_db</a>.<a class="code" href="classvotca_1_1tools_1_1Database.html#fb2a4e03b21b167516b2313d73c96581">Prepare</a>(<span class="stringliteral">"SELECT name "</span>
<a name="l00610"></a>00610                                   <span class="stringliteral">"FROM molecules "</span>
<a name="l00611"></a>00611                                   <span class="stringliteral">"WHERE top = ?;"</span>);
<a name="l00612"></a>00612     stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(1, topId);
<a name="l00613"></a>00613     <span class="keywordflow">while</span> (stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#676ec07b2df9828eb8cd97b06cd99122" title="perform a step">Step</a>() != SQLITE_DONE) {
<a name="l00614"></a>00614         <a class="code" href="classvotca_1_1ctp_1_1Molecule.html">Molecule</a> *mol = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#ac4c4795cf4928f15386c2c914f46c85">AddMolecule</a>(stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">string</span>&gt;(0));
<a name="l00615"></a>00615     }
<a name="l00616"></a>00616     <span class="keyword">delete</span> stmt;
<a name="l00617"></a>00617     stmt = NULL;
<a name="l00618"></a>00618 }
<a name="l00619"></a>00619 
<a name="l00620"></a>00620 
<a name="l00621"></a><a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#5ee0bd1c573e887eed60df5db75cfdb0">00621</a> <span class="keywordtype">void</span> <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#5ee0bd1c573e887eed60df5db75cfdb0">StateSaverSQLite::ReadSegTypes</a>(<span class="keywordtype">int</span> topId) {
<a name="l00622"></a>00622 
<a name="l00623"></a>00623     cout &lt;&lt; <span class="stringliteral">", types"</span>;
<a name="l00624"></a>00624 
<a name="l00625"></a>00625     <a class="code" href="classvotca_1_1tools_1_1Statement.html" title="Wrapper for sqlite prepared statements.">Statement</a> *stmt = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b1e5eefa1aeefd87a2fa6eeeb337dad6">_db</a>.<a class="code" href="classvotca_1_1tools_1_1Database.html#fb2a4e03b21b167516b2313d73c96581">Prepare</a>(<span class="stringliteral">"SELECT "</span>
<a name="l00626"></a>00626                                   <span class="stringliteral">"name, basis, orbfile, "</span>
<a name="l00627"></a>00627                                   <span class="stringliteral">"torbnrs, coordfile, canRigid "</span>
<a name="l00628"></a>00628                                   <span class="stringliteral">"FROM segmentTypes "</span>
<a name="l00629"></a>00629                                   <span class="stringliteral">"WHERE top = ?;"</span>);
<a name="l00630"></a>00630 
<a name="l00631"></a>00631     stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(1, topId);
<a name="l00632"></a>00632     <span class="keywordflow">while</span> (stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#676ec07b2df9828eb8cd97b06cd99122" title="perform a step">Step</a>() != SQLITE_DONE) {
<a name="l00633"></a>00633         <a class="code" href="classvotca_1_1ctp_1_1SegmentType.html">SegmentType</a> *type = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#a7c71362c80fc9c314b0fb117be2566f">AddSegmentType</a>(stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">string</span>&gt;(0));
<a name="l00634"></a>00634         type-&gt;<a class="code" href="classvotca_1_1ctp_1_1SegmentType.html#dd2714700ce5f5d0b94d058b642d9358">setBasisName</a>(stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">string</span>&gt;(1));
<a name="l00635"></a>00635         type-&gt;<a class="code" href="classvotca_1_1ctp_1_1SegmentType.html#62dca561c0c19523f376569d735012a6">setOrbitalsFile</a>(stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">string</span>&gt;(2));
<a name="l00636"></a>00636         type-&gt;<a class="code" href="classvotca_1_1ctp_1_1SegmentType.html#dabdd1fcb7f87fec09a5c31574ae668e">setQMCoordsFile</a>(stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">string</span>&gt;(4));
<a name="l00637"></a>00637 
<a name="l00638"></a>00638         <span class="comment">// NOTE v Not used v</span>
<a name="l00639"></a>00639         <span class="comment">// Transporting orbitals</span>
<a name="l00640"></a>00640         <span class="comment">// Tokenizer toker(stmt-&gt;Column&lt;string&gt;(3), ":");</span>
<a name="l00641"></a>00641         <span class="comment">// vector&lt;string&gt; orbNrsStrings;</span>
<a name="l00642"></a>00642         <span class="comment">// toker.ToVector(orbNrsStrings);</span>
<a name="l00643"></a>00643         <span class="comment">// vector&lt;int&gt; orbNrsInts;</span>
<a name="l00644"></a>00644         <span class="comment">// for (int i = 0; i &lt; orbNrsStrings.size(); i++) {</span>
<a name="l00645"></a>00645         <span class="comment">//     int nr = boost::lexical_cast&lt;int&gt;(orbNrsStrings[i]);</span>
<a name="l00646"></a>00646         <span class="comment">//     orbNrsInts.push_back(nr);</span>
<a name="l00647"></a>00647         <span class="comment">// }</span>
<a name="l00648"></a>00648         <span class="comment">// type-&gt;setTOrbNrs(orbNrsInts);</span>
<a name="l00649"></a>00649         <span class="comment">// NOTE ^ Not used ^</span>
<a name="l00650"></a>00650 
<a name="l00651"></a>00651         <span class="keywordtype">int</span> canRigidify = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">int</span>&gt;(5);
<a name="l00652"></a>00652         type-&gt;<a class="code" href="classvotca_1_1ctp_1_1SegmentType.html#830d83e747d0050d9124544c67e721ac">setCanRigidify</a>(canRigidify);
<a name="l00653"></a>00653 
<a name="l00654"></a>00654     }
<a name="l00655"></a>00655 
<a name="l00656"></a>00656     <span class="keyword">delete</span> stmt;
<a name="l00657"></a>00657     stmt = NULL;
<a name="l00658"></a>00658 }
<a name="l00659"></a>00659 
<a name="l00660"></a>00660 
<a name="l00661"></a>00661 
<a name="l00662"></a><a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#5da1138adcb3e1c43735ba287888fc9a">00662</a> <span class="keywordtype">void</span> <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#5da1138adcb3e1c43735ba287888fc9a">StateSaverSQLite::ReadSegments</a>(<span class="keywordtype">int</span> topId) {
<a name="l00663"></a>00663 
<a name="l00664"></a>00664     cout &lt;&lt; <span class="stringliteral">", segments"</span> &lt;&lt; flush;
<a name="l00665"></a>00665 
<a name="l00666"></a>00666     <a class="code" href="classvotca_1_1tools_1_1Statement.html" title="Wrapper for sqlite prepared statements.">Statement</a> *stmt = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b1e5eefa1aeefd87a2fa6eeeb337dad6">_db</a>.<a class="code" href="classvotca_1_1tools_1_1Database.html#fb2a4e03b21b167516b2313d73c96581">Prepare</a>(<span class="stringliteral">"SELECT name, type, mol, "</span>
<a name="l00667"></a>00667                                   <span class="stringliteral">"posX, posY, posZ, "</span>
<a name="l00668"></a>00668                                   <span class="stringliteral">"UnCnNe, UnCnNh, UcNcCe,"</span>
<a name="l00669"></a>00669                                   <span class="stringliteral">"UcNcCh, UcCnNe, UcCnNh,"</span>
<a name="l00670"></a>00670                                   <span class="stringliteral">"eAnion, eNeutral, eCation, "</span>
<a name="l00671"></a>00671                                   <span class="stringliteral">"occPe, occPh, has_e, has_h "</span>
<a name="l00672"></a>00672                                   <span class="stringliteral">"FROM segments "</span>
<a name="l00673"></a>00673                                   <span class="stringliteral">"WHERE top = ?;"</span>);
<a name="l00674"></a>00674     stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(1, topId);
<a name="l00675"></a>00675 
<a name="l00676"></a>00676     <span class="keywordflow">while</span> (stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#676ec07b2df9828eb8cd97b06cd99122" title="perform a step">Step</a>() != SQLITE_DONE) {
<a name="l00677"></a>00677 
<a name="l00678"></a>00678         <span class="keywordtype">string</span>  name = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">string</span>&gt;(0);
<a name="l00679"></a>00679         <span class="keywordtype">int</span>     type = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">int</span>&gt;(1);
<a name="l00680"></a>00680         <span class="keywordtype">int</span>     mId  = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">int</span>&gt;(2);
<a name="l00681"></a>00681         <span class="keywordtype">double</span>  X    = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(3);
<a name="l00682"></a>00682         <span class="keywordtype">double</span>  Y    = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(4);
<a name="l00683"></a>00683         <span class="keywordtype">double</span>  Z    = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(5);
<a name="l00684"></a>00684         <span class="keywordtype">double</span>  l1   = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(6);
<a name="l00685"></a>00685         <span class="keywordtype">double</span>  l2   = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(7);
<a name="l00686"></a>00686         <span class="keywordtype">double</span>  l3   = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(8);
<a name="l00687"></a>00687         <span class="keywordtype">double</span>  l4   = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(9);
<a name="l00688"></a>00688         <span class="keywordtype">double</span>  e1   = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(10);
<a name="l00689"></a>00689         <span class="keywordtype">double</span>  e2   = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(11);
<a name="l00690"></a>00690         <span class="keywordtype">double</span>  e3   = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(12);
<a name="l00691"></a>00691         <span class="keywordtype">double</span>  e4   = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(13);
<a name="l00692"></a>00692         <span class="keywordtype">double</span>  e5   = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(14);
<a name="l00693"></a>00693         <span class="keywordtype">double</span>  o1   = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(15);
<a name="l00694"></a>00694         <span class="keywordtype">double</span>  o2   = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(16);
<a name="l00695"></a>00695         <span class="keywordtype">int</span>     he   = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">int</span>&gt;(17);
<a name="l00696"></a>00696         <span class="keywordtype">int</span>     hh   = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">int</span>&gt;(18);
<a name="l00697"></a>00697 
<a name="l00698"></a>00698         <span class="keywordtype">bool</span> has_e = (he == 1) ? <span class="keyword">true</span> : <span class="keyword">false</span>;
<a name="l00699"></a>00699         <span class="keywordtype">bool</span> has_h = (hh == 1) ? <span class="keyword">true</span> : <span class="keyword">false</span>;
<a name="l00700"></a>00700 
<a name="l00701"></a>00701         <a class="code" href="classvotca_1_1ctp_1_1Segment.html">Segment</a> *seg = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#3257eb92b688c3336ffa4e4691d87bd1">AddSegment</a>(name);
<a name="l00702"></a>00702         seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#da68fa04177998ea19b3e9d83e8e849b">setMolecule</a>(<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#b341bdafb34a94b43117e1523c6c323e">getMolecule</a>(mId));
<a name="l00703"></a>00703         seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#f8b60aaed29fd6dd25db47bebb74b01b">setType</a>(<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#1d0cae31ad0edd07323b2255064b9394">getSegmentType</a>(type));
<a name="l00704"></a>00704         seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#fc5abd98391230978d2f1d0681cc57b3">setPos</a>(<a class="code" href="classvotca_1_1tools_1_1vec.html" title="Vector class for a 3 component vector.">vec</a>(X, Y, Z));
<a name="l00705"></a>00705         seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#1002f8b592afc2f11b40463310c58378">setU_nC_nN</a>(l1, -1);
<a name="l00706"></a>00706         seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#1002f8b592afc2f11b40463310c58378">setU_nC_nN</a>(l2, +1);
<a name="l00707"></a>00707         seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#64070b146aec6d15ced3202d9c667ae0">setU_cN_cC</a>(l3, -1);
<a name="l00708"></a>00708         seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#64070b146aec6d15ced3202d9c667ae0">setU_cN_cC</a>(l4, +1);
<a name="l00709"></a>00709         seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#65074348d127f0d58bea7b0d30b312b7">setU_cC_nN</a>(e1, -1);
<a name="l00710"></a>00710         seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#65074348d127f0d58bea7b0d30b312b7">setU_cC_nN</a>(e2, +1);
<a name="l00711"></a>00711         seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#913d84ed1b0f3c7de10d5319d07aa572">setEMpoles</a>(-1, e3);
<a name="l00712"></a>00712         seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#913d84ed1b0f3c7de10d5319d07aa572">setEMpoles</a>(0, e4);
<a name="l00713"></a>00713         seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#913d84ed1b0f3c7de10d5319d07aa572">setEMpoles</a>(1, e5);
<a name="l00714"></a>00714         seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#3ef4ff75a7f63997fc9c91181b6f3af6">setOcc</a>(o1, -1);
<a name="l00715"></a>00715         seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#3ef4ff75a7f63997fc9c91181b6f3af6">setOcc</a>(o2, +1);
<a name="l00716"></a>00716         seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#9a3740e28273f5e38956811b7e01a0a4">setHasState</a>(has_e, -1);
<a name="l00717"></a>00717         seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#9a3740e28273f5e38956811b7e01a0a4">setHasState</a>(has_h, +1);
<a name="l00718"></a>00718 
<a name="l00719"></a>00719 
<a name="l00720"></a>00720         seg-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#599d1be171e3e9bc1b117d24057e31d9">getMolecule</a>()-&gt;<a class="code" href="classvotca_1_1ctp_1_1Molecule.html#b075d2195d8919218a67a655c51a3c82">AddSegment</a>(seg);
<a name="l00721"></a>00721     }
<a name="l00722"></a>00722     <span class="keyword">delete</span> stmt;
<a name="l00723"></a>00723     stmt = NULL;
<a name="l00724"></a>00724 }
<a name="l00725"></a>00725 
<a name="l00726"></a>00726 
<a name="l00727"></a><a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#791b80d2da8e511a284cd092c61bfbb5">00727</a> <span class="keywordtype">void</span> <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#791b80d2da8e511a284cd092c61bfbb5">StateSaverSQLite::ReadFragments</a>(<span class="keywordtype">int</span> topId) {
<a name="l00728"></a>00728 
<a name="l00729"></a>00729     cout &lt;&lt; <span class="stringliteral">", fragments"</span> &lt;&lt; flush;
<a name="l00730"></a>00730 
<a name="l00731"></a>00731     <a class="code" href="classvotca_1_1tools_1_1Statement.html" title="Wrapper for sqlite prepared statements.">Statement</a> *stmt = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b1e5eefa1aeefd87a2fa6eeeb337dad6">_db</a>.<a class="code" href="classvotca_1_1tools_1_1Database.html#fb2a4e03b21b167516b2313d73c96581">Prepare</a>(<span class="stringliteral">"SELECT "</span>
<a name="l00732"></a>00732                                   <span class="stringliteral">"name, mol, seg, "</span>
<a name="l00733"></a>00733                                   <span class="stringliteral">"posX, posY, posZ, "</span>
<a name="l00734"></a>00734                                   <span class="stringliteral">"symmetry, leg1, leg2, leg3 "</span>
<a name="l00735"></a>00735                                   <span class="stringliteral">"FROM fragments "</span>
<a name="l00736"></a>00736                                   <span class="stringliteral">"WHERE top = ?;"</span>);
<a name="l00737"></a>00737 
<a name="l00738"></a>00738     stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(1, topId);
<a name="l00739"></a>00739 
<a name="l00740"></a>00740     <span class="keywordflow">while</span> (stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#676ec07b2df9828eb8cd97b06cd99122" title="perform a step">Step</a>() != SQLITE_DONE) {
<a name="l00741"></a>00741 
<a name="l00742"></a>00742         <span class="keywordtype">string</span>  name    = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">string</span>&gt;(0);
<a name="l00743"></a>00743         <span class="keywordtype">int</span>     molid   = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">int</span>&gt;(1);
<a name="l00744"></a>00744         <span class="keywordtype">int</span>     segid   = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">int</span>&gt;(2);
<a name="l00745"></a>00745         <span class="keywordtype">double</span>  posX    = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(3);
<a name="l00746"></a>00746         <span class="keywordtype">double</span>  posY    = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(4);
<a name="l00747"></a>00747         <span class="keywordtype">double</span>  posZ    = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(5);
<a name="l00748"></a>00748         <span class="keywordtype">int</span>     symm    = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">int</span>&gt;(6);
<a name="l00749"></a>00749         <span class="keywordtype">int</span>     leg1    = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">int</span>&gt;(7);
<a name="l00750"></a>00750         <span class="keywordtype">int</span>     leg2    = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">int</span>&gt;(8);
<a name="l00751"></a>00751         <span class="keywordtype">int</span>     leg3    = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">int</span>&gt;(9);
<a name="l00752"></a>00752 
<a name="l00753"></a>00753         vector&lt;int&gt; trihedron;
<a name="l00754"></a>00754         trihedron.push_back(leg1);
<a name="l00755"></a>00755         <span class="keywordflow">if</span> (leg2 &gt;= 0) {trihedron.push_back(leg2);}
<a name="l00756"></a>00756         <span class="keywordflow">if</span> (leg3 &gt;= 0) {trihedron.push_back(leg3);}
<a name="l00757"></a>00757 
<a name="l00758"></a>00758         <a class="code" href="classvotca_1_1ctp_1_1Fragment.html" title="Rigid fragment. One conjugated segment contains several rigid fragments.">Fragment</a> *frag = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#d6259af183b96b3af7189d7d83616f1f">AddFragment</a>(name);
<a name="l00759"></a>00759         frag-&gt;<a class="code" href="classvotca_1_1ctp_1_1Fragment.html#56cea6fd832ff7e767b03edd109ebfc8">setSegment</a>(<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#5044f2e642b6055161c5bc8c0deabead">getSegment</a>(segid));
<a name="l00760"></a>00760         frag-&gt;<a class="code" href="classvotca_1_1ctp_1_1Fragment.html#7de49a78591bb191c7e6123928cf4c45">setMolecule</a>(<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#b341bdafb34a94b43117e1523c6c323e">getMolecule</a>(molid));
<a name="l00761"></a>00761         frag-&gt;<a class="code" href="classvotca_1_1ctp_1_1Fragment.html#8c1e3b88c6cacca761700a22de6c4080">setPos</a>(<a class="code" href="classvotca_1_1tools_1_1vec.html" title="Vector class for a 3 component vector.">vec</a>(posX, posY, posZ));
<a name="l00762"></a>00762         frag-&gt;<a class="code" href="classvotca_1_1ctp_1_1Fragment.html#b587759593ba383617ccbc9004537b5d">setSymmetry</a>(symm);
<a name="l00763"></a>00763         frag-&gt;<a class="code" href="classvotca_1_1ctp_1_1Fragment.html#3aa974a0a07ae970691a2fe0cab7a69c">setTrihedron</a>(trihedron);
<a name="l00764"></a>00764 
<a name="l00765"></a>00765         frag-&gt;<a class="code" href="classvotca_1_1ctp_1_1Fragment.html#4e2ce10bc38b028070ecd8ad7e97ebdc">getSegment</a>()-&gt;<a class="code" href="classvotca_1_1ctp_1_1Segment.html#f96d1b8363630b002e5a1768f31d16a1">AddFragment</a>(frag);
<a name="l00766"></a>00766         frag-&gt;<a class="code" href="classvotca_1_1ctp_1_1Fragment.html#72bd37b503218f2373bbb4256f61cce5">getMolecule</a>()-&gt;<a class="code" href="classvotca_1_1ctp_1_1Molecule.html#f5f603d9c704b7565b80ad10a58e74bf">AddFragment</a>(frag);
<a name="l00767"></a>00767 
<a name="l00768"></a>00768     }
<a name="l00769"></a>00769     <span class="keyword">delete</span> stmt;
<a name="l00770"></a>00770     stmt = NULL;
<a name="l00771"></a>00771 }
<a name="l00772"></a>00772 
<a name="l00773"></a>00773 
<a name="l00774"></a><a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#147cb9030b936fe7e62aee114fa106e6">00774</a> <span class="keywordtype">void</span> <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#147cb9030b936fe7e62aee114fa106e6">StateSaverSQLite::ReadAtoms</a>(<span class="keywordtype">int</span> topId) {
<a name="l00775"></a>00775 
<a name="l00776"></a>00776     cout &lt;&lt; <span class="stringliteral">", atoms"</span> &lt;&lt; flush;
<a name="l00777"></a>00777 
<a name="l00778"></a>00778     <a class="code" href="classvotca_1_1tools_1_1Statement.html" title="Wrapper for sqlite prepared statements.">Statement</a> *stmt = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b1e5eefa1aeefd87a2fa6eeeb337dad6">_db</a>.<a class="code" href="classvotca_1_1tools_1_1Database.html#fb2a4e03b21b167516b2313d73c96581">Prepare</a>(<span class="stringliteral">"SELECT "</span>
<a name="l00779"></a>00779                                   <span class="stringliteral">"name, mol, seg, frag, "</span>
<a name="l00780"></a>00780                                   <span class="stringliteral">"resnr, resname, "</span>
<a name="l00781"></a>00781                                   <span class="stringliteral">"posX, posY, posZ, "</span>
<a name="l00782"></a>00782                                   <span class="stringliteral">"weight, qmid, qmPosX, "</span>
<a name="l00783"></a>00783                                   <span class="stringliteral">"qmPosY, qmPosZ, element "</span>
<a name="l00784"></a>00784                                   <span class="stringliteral">"FROM atoms "</span>
<a name="l00785"></a>00785                                   <span class="stringliteral">"WHERE top = ?;"</span>);
<a name="l00786"></a>00786 
<a name="l00787"></a>00787     stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(1, topId);
<a name="l00788"></a>00788 
<a name="l00789"></a>00789     <span class="keywordflow">while</span> (stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#676ec07b2df9828eb8cd97b06cd99122" title="perform a step">Step</a>() != SQLITE_DONE) {
<a name="l00790"></a>00790 
<a name="l00791"></a>00791         <span class="keywordtype">string</span>  name = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">string</span>&gt;(0);
<a name="l00792"></a>00792         <span class="keywordtype">int</span>     molid = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">int</span>&gt;(1);
<a name="l00793"></a>00793         <span class="keywordtype">int</span>     segid = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">int</span>&gt;(2);
<a name="l00794"></a>00794         <span class="keywordtype">int</span>     fragid = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">int</span>&gt;(3);
<a name="l00795"></a>00795         <span class="keywordtype">int</span>     resnr = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">int</span>&gt;(4);
<a name="l00796"></a>00796         <span class="keywordtype">string</span>  resname = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">string</span>&gt;(5);
<a name="l00797"></a>00797         <span class="keywordtype">double</span>  posX = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(6);
<a name="l00798"></a>00798         <span class="keywordtype">double</span>  posY = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(7);
<a name="l00799"></a>00799         <span class="keywordtype">double</span>  posZ = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(8);
<a name="l00800"></a>00800         <span class="keywordtype">double</span>  <a class="code" href="namespacetable__smooth__borders.html#9fd05956de12de102e40126e4c89f521">weight</a> = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(9);
<a name="l00801"></a>00801         <span class="keywordtype">int</span>     qmid = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(10);
<a name="l00802"></a>00802         <span class="keywordtype">double</span>  qmPosX = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(11);
<a name="l00803"></a>00803         <span class="keywordtype">double</span>  qmPosY = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(12);
<a name="l00804"></a>00804         <span class="keywordtype">double</span>  qmPosZ = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(13);
<a name="l00805"></a>00805         <span class="keywordtype">string</span>  element = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">string</span>&gt;(14);
<a name="l00806"></a>00806 
<a name="l00807"></a>00807         <a class="code" href="classvotca_1_1ctp_1_1Atom.html" title="information about an atom">Atom</a> *atm = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#689cdbd91a064dbc5ae4cad2ff5e4f22">AddAtom</a>(name);
<a name="l00808"></a>00808         atm-&gt;<a class="code" href="classvotca_1_1ctp_1_1Atom.html#4de0f423fb33e994b3f90c3bf95d260d">setWeight</a>(weight);
<a name="l00809"></a>00809         atm-&gt;setQMPart(qmid, <a class="code" href="classvotca_1_1tools_1_1vec.html" title="Vector class for a 3 component vector.">vec</a>(qmPosX,qmPosY,qmPosZ));
<a name="l00810"></a>00810         atm-&gt;setElement(element);
<a name="l00811"></a>00811         atm-&gt;setPos( <a class="code" href="classvotca_1_1tools_1_1vec.html" title="Vector class for a 3 component vector.">vec</a>(posX, posY, posZ) );
<a name="l00812"></a>00812         
<a name="l00813"></a>00813         atm-&gt;setFragment(<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#8b326060d024d63841243a833e214ff2">getFragment</a>(fragid));
<a name="l00814"></a>00814         atm-&gt;setSegment(<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#5044f2e642b6055161c5bc8c0deabead">getSegment</a>(segid));
<a name="l00815"></a>00815         atm-&gt;setMolecule(<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#b341bdafb34a94b43117e1523c6c323e">getMolecule</a>(molid));
<a name="l00816"></a>00816 
<a name="l00817"></a>00817         atm-&gt;getFragment()-&gt;AddAtom(atm);
<a name="l00818"></a>00818         atm-&gt;getSegment()-&gt;AddAtom(atm);
<a name="l00819"></a>00819         atm-&gt;getMolecule()-&gt;AddAtom(atm);
<a name="l00820"></a>00820 
<a name="l00821"></a>00821         atm-&gt;setResnr(resnr);
<a name="l00822"></a>00822         atm-&gt;setResname(resname);  
<a name="l00823"></a>00823     }
<a name="l00824"></a>00824     <span class="keyword">delete</span> stmt;
<a name="l00825"></a>00825     stmt = NULL;
<a name="l00826"></a>00826 }
<a name="l00827"></a>00827 
<a name="l00828"></a>00828 
<a name="l00829"></a><a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#866159b49d96507b9b9dd50b5742b7db">00829</a> <span class="keywordtype">void</span> <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#866159b49d96507b9b9dd50b5742b7db">StateSaverSQLite::ReadPairs</a>(<span class="keywordtype">int</span> topId) {
<a name="l00830"></a>00830 
<a name="l00831"></a>00831     cout &lt;&lt; <span class="stringliteral">", pairs"</span> &lt;&lt; flush;
<a name="l00832"></a>00832 
<a name="l00833"></a>00833     <a class="code" href="classvotca_1_1tools_1_1Statement.html" title="Wrapper for sqlite prepared statements.">Statement</a> *stmt = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b1e5eefa1aeefd87a2fa6eeeb337dad6">_db</a>.<a class="code" href="classvotca_1_1tools_1_1Database.html#fb2a4e03b21b167516b2313d73c96581">Prepare</a>(<span class="stringliteral">"SELECT "</span>
<a name="l00834"></a>00834                                   <span class="stringliteral">"seg1, seg2, has_e,"</span>
<a name="l00835"></a>00835                                   <span class="stringliteral">"has_h, lOe, "</span>
<a name="l00836"></a>00836                                   <span class="stringliteral">"lOh, rate12e, rate21e, "</span>
<a name="l00837"></a>00837                                   <span class="stringliteral">"rate12h, rate21h, "</span>
<a name="l00838"></a>00838                                   <span class="stringliteral">"Jeff2e, Jeff2h "</span>
<a name="l00839"></a>00839                                   <span class="stringliteral">"FROM pairs "</span>
<a name="l00840"></a>00840                                   <span class="stringliteral">"WHERE top = ?;"</span>);
<a name="l00841"></a>00841 
<a name="l00842"></a>00842     stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5e5076076aaddf159310f61c393fe73e" title="bind a value to prepared statement">Bind</a>(1, topId);
<a name="l00843"></a>00843     
<a name="l00844"></a>00844     <span class="keywordflow">while</span> (stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#676ec07b2df9828eb8cd97b06cd99122" title="perform a step">Step</a>() != SQLITE_DONE) {
<a name="l00845"></a>00845         <span class="keywordtype">int</span>     s1  = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">int</span>&gt;(0);
<a name="l00846"></a>00846         <span class="keywordtype">int</span>     s2  = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">int</span>&gt;(1);
<a name="l00847"></a>00847         <span class="keywordtype">int</span>     he  = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">int</span>&gt;(2);
<a name="l00848"></a>00848         <span class="keywordtype">int</span>     hh  = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">int</span>&gt;(3);
<a name="l00849"></a>00849         <span class="keywordtype">double</span>  l1  = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(4);
<a name="l00850"></a>00850         <span class="keywordtype">double</span>  l2  = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(5);
<a name="l00851"></a>00851         <span class="keywordtype">double</span>  r1  = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(6);
<a name="l00852"></a>00852         <span class="keywordtype">double</span>  r2  = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(7);
<a name="l00853"></a>00853         <span class="keywordtype">double</span>  r3  = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(8);
<a name="l00854"></a>00854         <span class="keywordtype">double</span>  r4  = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(9);
<a name="l00855"></a>00855         <span class="keywordtype">double</span>  je  = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(10);
<a name="l00856"></a>00856         <span class="keywordtype">double</span>  jh  = stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">double</span>&gt;(11);
<a name="l00857"></a>00857         
<a name="l00858"></a>00858         <a class="code" href="classvotca_1_1ctp_1_1QMPair.html">QMPair</a> *newPair = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#c546b928e29e690be03b3f273e9e2d05">NBList</a>().<a class="code" href="classvotca_1_1ctp_1_1QMNBList.html#eb21e38d2d61ac45af57f248e0a99204">Add</a>(<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#5044f2e642b6055161c5bc8c0deabead">getSegment</a>(s1),
<a name="l00859"></a>00859                                                 <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#0f348db9e7407c76aacebfdf0aa1e656">_qmtop</a>-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#5044f2e642b6055161c5bc8c0deabead">getSegment</a>(s2));
<a name="l00860"></a>00860 
<a name="l00861"></a>00861         <span class="keywordtype">bool</span> has_e = (he == 0) ? <span class="keyword">false</span> : <span class="keyword">true</span>;
<a name="l00862"></a>00862         <span class="keywordtype">bool</span> has_h = (hh == 0) ? <span class="keyword">false</span> : <span class="keyword">true</span>;
<a name="l00863"></a>00863 
<a name="l00864"></a>00864         newPair-&gt;<a class="code" href="classvotca_1_1ctp_1_1QMPair.html#564ccb7cd501d9cdb93ed7961356c260">setIsPathCarrier</a>(has_e, -1);
<a name="l00865"></a>00865         newPair-&gt;setIsPathCarrier(has_h, +1);
<a name="l00866"></a>00866         newPair-&gt;setLambdaO(l1, -1);
<a name="l00867"></a>00867         newPair-&gt;setLambdaO(l2, +1);
<a name="l00868"></a>00868         newPair-&gt;setRate12(r1, -1);
<a name="l00869"></a>00869         newPair-&gt;setRate21(r2, -1);
<a name="l00870"></a>00870         newPair-&gt;setRate12(r3, +1);
<a name="l00871"></a>00871         newPair-&gt;setRate21(r4, +1);
<a name="l00872"></a>00872         newPair-&gt;setJeff2(je, -1);
<a name="l00873"></a>00873         newPair-&gt;setJeff2(jh, +1);
<a name="l00874"></a>00874 
<a name="l00875"></a>00875     }
<a name="l00876"></a>00876     <span class="keyword">delete</span> stmt;
<a name="l00877"></a>00877     stmt = NULL;
<a name="l00878"></a>00878 }
<a name="l00879"></a>00879 
<a name="l00880"></a>00880 
<a name="l00881"></a>00881 
<a name="l00882"></a><a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#9134a2896226a9176966cf3ff1a21cb6">00882</a> <span class="keywordtype">bool</span> <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#9134a2896226a9176966cf3ff1a21cb6">StateSaverSQLite::HasTopology</a>(<a class="code" href="classvotca_1_1ctp_1_1Topology.html" title="Container for molecules, conjugated segments, rigid fragments, and atoms.">Topology</a> *top) {
<a name="l00883"></a>00883 
<a name="l00884"></a>00884     <span class="comment">// Determine from topology ID whether database already stores a</span>
<a name="l00885"></a>00885     <span class="comment">// (previous) copy</span>
<a name="l00886"></a>00886 
<a name="l00887"></a>00887     <a class="code" href="classvotca_1_1tools_1_1Statement.html" title="Wrapper for sqlite prepared statements.">Statement</a> *stmt = <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#b1e5eefa1aeefd87a2fa6eeeb337dad6">_db</a>.<a class="code" href="classvotca_1_1tools_1_1Database.html#fb2a4e03b21b167516b2313d73c96581">Prepare</a>(<span class="stringliteral">"SELECT id FROM frames"</span>);
<a name="l00888"></a>00888 
<a name="l00889"></a>00889     <span class="keywordflow">while</span> (stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#676ec07b2df9828eb8cd97b06cd99122" title="perform a step">Step</a>() != SQLITE_DONE) {
<a name="l00890"></a>00890         <span class="keywordflow">if</span> ( stmt-&gt;<a class="code" href="classvotca_1_1tools_1_1Statement.html#5844859b5ee01421dcb88d9fc85717c7" title="read a column after a select statement was executed">Column</a>&lt;<span class="keywordtype">int</span>&gt;(0) == top-&gt;<a class="code" href="classvotca_1_1ctp_1_1Topology.html#a9d490b41236b1c5a43e101e40257c29">getDatabaseId</a>() ) { <span class="keywordflow">return</span> <span class="keyword">true</span>; }
<a name="l00891"></a>00891         <span class="keywordflow">else</span> { ; }
<a name="l00892"></a>00892     }
<a name="l00893"></a>00893 
<a name="l00894"></a>00894     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00895"></a>00895 
<a name="l00896"></a>00896 }
<a name="l00897"></a>00897 
<a name="l00898"></a>00898 
<a name="l00899"></a><a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#daaefd2847f280aec5c1a06de12bab13">00899</a> <span class="keywordtype">int</span> <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#daaefd2847f280aec5c1a06de12bab13">StateSaverSQLite::FramesInDatabase</a>() {
<a name="l00900"></a>00900     cout &lt;&lt; <span class="stringliteral">"Reading file "</span> &lt;&lt; this-&gt;<a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#3f4f12eb20069e65bf66bf22733cc63e">_sqlfile</a> &lt;&lt; <span class="stringliteral">": Found "</span> &lt;&lt; <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#4073b7b3e098ab893f8fb0efe342586e">_frames</a>.size()
<a name="l00901"></a>00901          &lt;&lt; <span class="stringliteral">" frames stored in database. \n"</span>;
<a name="l00902"></a>00902     <span class="keywordflow">return</span> <a class="code" href="classvotca_1_1ctp_1_1StateSaverSQLite.html#4073b7b3e098ab893f8fb0efe342586e">_frames</a>.size();
<a name="l00903"></a>00903 }
<a name="l00904"></a>00904 
<a name="l00905"></a>00905 }}
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small><a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> </small></address>
</body>
</html>
